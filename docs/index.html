<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>tidy.js for R</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
  </style>


  <style type="text/css">:root {
--font-monospace: 'Source Code Pro', 'Fira Code', 'Consolas', 'Monaco', monospace;
--font-body: 'Lato', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
--font-header: 'Nunito Sans', apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
}
</style>
  <style type="text/css">:root {
--text: #2f4858;
--text-med: #6d7e8a;
--text-light: #c0c8cc;
--text-lighter: #eaecee;
--border-radius: 3px;
--dark-red: #9a2e36;
--red: #d33f49;
--light-red: #e3848b;
--orange: #ff6300;
--gold: #c0af3f;
--yellow: #f0db4f;
--light-yellow: #f6e995;
--purple: #993d70;
--light-purple: #b7779a;
--dark-pink: #b24e72;
--hot-pink: #ff41b4;
--pink: #ff70a3;
--light-pink: #ffc5da;
--dark-green: #338d70;
--green: #44bc96;
--light-green: #55ebbc;
--navy: #001b44;
--dark-blue: #466683;
--blue: #4d8dc9;
--light-blue: #75aadb;
--lightest-blue: #bad4ed;
--washed-blue: #f8fafd;
--washed-green: #ecf8f4;
--washed-yellow: #fefcf4;
--washed-red: #fcf4f5;
--washed-purple: #faf7f9;
}
</style>
  <link href="data:text/css;charset=utf-8,body%20%7B%0Afont%2Dfamily%3A%20var%28%2D%2Dfont%2Dbody%29%3B%0Aline%2Dheight%3A%201%2E5%3B%0Afont%2Dsize%3A%201em%3B%0Acolor%3A%20var%28%2D%2Dtext%29%3B%0Amargin%3A%2010px%3B%0A%2Dwebkit%2Dtext%2Dsize%2Dadjust%3A%20100%25%3B%0A%7D%0A%0Ah1%2C%0Ah2%2C%0Ah3%2C%0Ah4%2C%0Ah5%2C%0Ah6%20%7B%0Afont%2Dfamily%3A%20var%28%2D%2Dfont%2Dheader%29%3B%0Amargin%3A%200%2E67em%200%200%2E33em%200%3B%0A%7D%0Ah1%20%7B%0Afont%2Dsize%3A%202em%3B%0Aline%2Dheight%3A%201%2E25%3B%0A%7D%0A%40media%20%28min%2Dwidth%3A%2043%2E75em%29%20%7B%0Ah1%20%7B%0Afont%2Dsize%3A%202%2E5em%3B%0Aline%2Dheight%3A%201%2E125%3B%0A%7D%0A%7D%0A%40media%20%28min%2Dwidth%3A%2056%2E25em%29%20%7B%0Ah1%20%7B%0Afont%2Dsize%3A%203em%3B%0Aline%2Dheight%3A%201%2E05%3B%0A%7D%0A%7D%0Ah2%20%7B%0Afont%2Dsize%3A%201%2E625em%3B%0Aline%2Dheight%3A%201%2E15384615%3B%0A%7D%0A%40media%20%28min%2Dwidth%3A%2043%2E75em%29%20%7B%0Ah2%20%7B%0Afont%2Dsize%3A%202em%3B%0Aline%2Dheight%3A%201%2E25%3B%0A%7D%0A%7D%0A%40media%20%28min%2Dwidth%3A%2056%2E25em%29%20%7B%0Ah2%20%7B%0Afont%2Dsize%3A%202%2E25em%3B%0Aline%2Dheight%3A%201%2E25%3B%0A%7D%0A%7D%0Ah3%20%7B%0Afont%2Dsize%3A%201%2E375em%3B%0Aline%2Dheight%3A%201%2E13636364%3B%0A%7D%0A%40media%20%28min%2Dwidth%3A%2043%2E75em%29%20%7B%0Ah3%20%7B%0Afont%2Dsize%3A%201%2E5em%3B%0Aline%2Dheight%3A%201%2E25%3B%0A%7D%0A%7D%0A%40media%20%28min%2Dwidth%3A%2056%2E25em%29%20%7B%0Ah3%20%7B%0Afont%2Dsize%3A%201%2E75em%3B%0Aline%2Dheight%3A%201%2E25%3B%0A%7D%0A%7D%0Ah4%20%7B%0Afont%2Dsize%3A%201%2E125em%3B%0Aline%2Dheight%3A%201%2E11111111%3B%0A%7D%0A%40media%20%28min%2Dwidth%3A%2043%2E75em%29%20%7B%0Ah4%20%7B%0Aline%2Dheight%3A%201%2E22222222%3B%0A%7D%0A%7D%0Ah5%20%7B%0Afont%2Dsize%3A%201%2E1em%3B%0Aline%2Dheight%3A%201%2E11111111%3B%0A%7D%0A%40media%20%28min%2Dwidth%3A%2043%2E75em%29%20%7B%0Ah5%20%7B%0Aline%2Dheight%3A%201%2E22222222%3B%0A%7D%0A%7D%0Ah6%20%7B%0Afont%2Dsize%3A%201em%3B%0Aline%2Dheight%3A%201%2E11111111%3B%0A%7D%0A%40media%20%28min%2Dwidth%3A%2043%2E75em%29%20%7B%0Ah6%20%7B%0Aline%2Dheight%3A%201%2E22222222%3B%0A%7D%0A%7D%0A%0Aa%20%7B%0Acolor%3A%20var%28%2D%2Dblue%29%3B%0Abackground%2Dcolor%3A%20transparent%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20var%28%2D%2Ddark%2Dblue%29%3B%0A%7D%0A%0Anav%20%7B%0Abackground%2Dcolor%3A%20var%28%2D%2Dtext%2Dlighter%29%3B%0Apadding%3A%201em%3B%0Amargin%3A%20%2D10px%3B%0A%7D%0Anav%20a%20%7B%0Apadding%3A%200%2E5em%3B%0Aborder%2Dradius%3A%20var%28%2D%2Dborder%2Dradius%29%3B%0Atext%2Ddecoration%3A%20none%3B%0Acolor%3A%20var%28%2D%2Dtext%2Dmed%29%3B%0A%7D%0Anav%20a%3Ahover%20%7B%0Acolor%3A%20var%28%2D%2Dred%29%3B%0A%7D%0A%0Ahr%20%7B%0Aborder%3A%201px%20solid%20var%28%2D%2Dtext%2Dmed%29%3B%0Aborder%2Dbottom%3A%200px%3B%0Aheight%3A%200px%3B%0A%7D%0A%0Ap%20%7B%0Amargin%3A%201em%200%3B%0A%7D%0Amark%20%7B%0Abackground%2Dcolor%3A%20var%28%2D%2Dyellow%29%3B%0Acolor%3A%20%23333333%3B%0A%7D%0Asmall%20%7B%0Afont%2Dsize%3A%2080%25%3B%0A%7D%0Asub%2C%0Asup%20%7B%0Afont%2Dsize%3A%2075%25%3B%0A%7D%0A%0Ablockquote%20%7B%0Aborder%2Dleft%3A%204px%20solid%20var%28%2D%2Dtext%2Dlight%29%3B%0Amargin%3A%201em%200%3B%0Apadding%3A%200%2E6em%201em%3B%0A%7D%0A%0Aul%2C%0Aol%20%7B%0Apadding%2Dleft%3A%202em%3B%0A%7D%0Aul%20li%2C%0Aol%20li%20%7B%0Aline%2Dheight%3A%201%2E75%3B%0A%7D%0A%0Afieldset%20%7B%0Aborder%3A%201px%20solid%20var%28%2D%2Dtext%29%3B%0Aborder%2Dradius%3A%20var%28%2D%2Dborder%2Dradius%29%3B%0A%7D%0Aselect%20%7B%0A%2Dwebkit%2Dappearance%3A%20none%3B%0A%2Dmoz%2Dappearance%3A%20none%3B%0Aappearance%3A%20none%3B%0Abackground%3A%20transparent%3B%0Abackground%2Dimage%3A%20url%28%22data%3Aimage%2Fsvg%2Bxml%3Butf8%2C%20%3Csvg%20fill%3D%27black%27%20height%3D%2724%27%20viewBox%3D%270%200%2024%2024%27%20width%3D%2724%27%20xmlns%3D%27http%3A%2F%2Fwww%2Ew3%2Eorg%2F2000%2Fsvg%27%3E%3Cpath%20d%3D%27M7%2010l5%205%205%2D5z%27%2F%3E%3Cpath%20d%3D%27M00h24v24H0z%27%20fill%3D%27none%27%2F%3E%3C%2Fsvg%3E%22%29%3B%0Abackground%2Drepeat%3A%20no%2Drepeat%3B%0Abackground%2Dposition%2Dx%3A%20100%25%3B%0Abackground%2Dposition%2Dy%3A%2050%25%3B%0A%7D%0Abutton%2C%0Ainput%2C%0Aselect%2C%0Atextarea%2C%0Aa%5Brole%3D%22button%22%5D%20%7B%0Afont%2Dfamily%3A%20inherit%3B%0Afont%2Dsize%3A%20100%25%3B%0Aline%2Dheight%3A%201%2E5%3B%0Amargin%3A%200%3B%0Apadding%3A%200%2E33em%3B%0Aborder%3A%201px%20solid%20var%28%2D%2Dtext%2Dlight%29%3B%0Aborder%2Dradius%3A%20var%28%2D%2Dborder%2Dradius%29%3B%0Abox%2Dsizing%3A%20border%2Dbox%3B%0A%7D%0Ainput%5Btype%3D%22checkbox%22%5D%2C%0Ainput%5Btype%3D%22radio%22%5D%20%7B%0Aborder%3A%20none%3B%0Aborder%3A%200%3B%0A%7D%0Abutton%2C%0Ainput%5Btype%3D%22button%22%5D%2C%0Ainput%5Btype%3D%22submit%22%5D%2C%0Aa%5Brole%3D%22button%22%5D%20%7B%0Apadding%3A%200%2E33em%200%2E66em%3B%0Acursor%3A%20pointer%3B%0Abackground%2Dcolor%3A%20var%28%2D%2Dtext%2Dlighter%29%3B%0Acolor%3A%20var%28%2D%2Dtext%29%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Abutton%3Ahover%2C%0Ainput%5Btype%3D%22button%22%5D%3Ahover%2C%0Ainput%5Btype%3D%22submit%22%5D%3Ahover%2C%0Aa%5Brole%3D%22button%22%5D%3Ahover%20%7B%0Abackground%2Dcolor%3A%20var%28%2D%2Dtext%2Dlight%29%3B%0A%7D%0Aa%5Brole%3D%22button%22%5D%20%7B%0Apadding%3A%200%2E5em%200%2E66em%3B%0A%7D%0Abutton%3Adisabled%2C%0Ainput%5Btype%3D%22button%22%5D%3Adisabled%2C%0Ainput%5Btype%3D%22submit%22%5D%3Adisabled%2C%0Aa%5Brole%3D%22button%22%5D%3Adisabled%20%7B%0Abackground%2Dcolor%3A%20var%28%2D%2Dtext%2Dlighter%29%3B%0Acolor%3A%20var%28%2D%2Dtext%2Dlight%29%3B%0Acursor%3A%20not%2Dallowed%3B%0A%7D%0A%0Aprogress%5Bvalue%5D%20%7B%0A%2Dwebkit%2Dappearance%3A%20none%3B%0A%2Dmoz%2Dappearance%3A%20none%3B%0Aappearance%3A%20none%3B%0Avertical%2Dalign%3A%20middle%3B%0Aborder%3A%20none%3B%0Awidth%3A%2015em%3B%0Aheight%3A%200%2E75em%3B%0Abackground%2Dcolor%3A%20var%28%2D%2Dtext%2Dlight%29%3B%0Acolor%3A%20var%28%2D%2Dblue%29%3B%0A%7D%0Aprogress%5Bvalue%5D%3A%3A%2Dwebkit%2Dprogress%2Dbar%20%7B%0Abackground%2Dcolor%3A%20var%28%2D%2Dtext%2Dlight%29%3B%0A%7D%0Aprogress%5Bvalue%5D%3A%3A%2Dwebkit%2Dprogress%2Dvalue%20%7B%0Abackground%2Dcolor%3A%20var%28%2D%2Dblue%29%3B%0A%7D%0A" rel="stylesheet" />
  <style type="text/css">

table {
border-collapse: collapse;
}
table,
table th,
table td {
border-bottom: 1px solid var(--text-light);
padding: 0.33em 0.66em;
text-align: left;
vertical-align: middle;
}
table[border="1"],
table[border="1"] th,
table[border="1"] td {
border: 1px solid var(--text-light);
}
</style>
  <style type="text/css">

.left {
float: left;
}
.right {
float: right;
}
.center {
text-align: center;
}
.clear {
clear: both;
}
.hide {
display: none;
}
.spacer {
display: block;
height: 1em;
border: none;
clear: both;
}
.wrap {
width: 100%;
max-width: 40em;
margin: auto;
}
.reset {
font: inherit;
font-size: 100%;
margin: 0;
padding: 0;
border: 0;
text-decoration: none;
}
ol.reset,
ul.reset {
list-style: none;
}

::-moz-selection {
background-color: rgba(85, 235, 188, 0.6);
}
::selection {
background-color: rgba(85, 235, 188, 0.6);
}

kbd {
padding: 0.1em 0.6em;
border: 1px solid var(--text-lighter);
font-family: var(--font-monospace);
background-color: var(--text-lighter);
color: var(--text);
-webkit-box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2), 0 0 0 1px #fff inset;
box-shadow: 0 1px 0px 2px rgba(0, 0, 0, 0.2), 0 0 0 1px #fff inset;
-moz-border-radius: 3px;
-webkit-border-radius: 3px;
border-radius: 3px;
display: inline-block;
margin: 0 0.1em;
line-height: 1.4;
white-space: nowrap;
}
</style>
  <style type="text/css">pre {
font-family: var(--font-monospace);
padding: 0.8em;
position: relative;
font-size: 1rem;
line-height: 1.2em;
white-space: pre-wrap;
word-wrap: break-word;
border-left: 3px solid var(--text-lighter);
}
pre code {
border: none;
color: var(--text);
}
pre::after {
position: absolute;
bottom: 5px;
right: 5px;
opacity: 0.5;
}
pre.js {
border-color: var(--yellow);
}
pre.js::after {
content: 'js';
color: var(--yellow);
opacity: 1;
}
pre.r {
border-color: var(--blue);
}
pre.r::after {
content: 'r';
color: var(--blue);
}
pre.json {
border-color: var(--purple);
}
pre.json::after {
content: 'json';
color: var(--purple);
}
pre.node,
pre.bash,
pre.sh {
border-color: var(--green);
}
pre.node::after {
content: 'node';
color: var(--green);
opacity: 1;
}
pre.bash::after,
pre.sh::after {
content: 'sh';
color: var(--green);
opacity: 1;
}
pre.md,
pre.markdown,
pre.yaml {
border-color: var(--red);
}
pre.yaml::after {
content: 'yaml';
color: var(--red);
}
pre.markdown::after,
pre.md::after {
content: 'md';
color: var(--red);
}
pre.html {
border-color: #E34C26;
}
pre.html::after {
content: 'html';
color: #E34C26;
}
pre.css {
border-color: #264DE4;
position: relative;
}
pre.css::after {
content: 'css';
color: #264de4;
}
.pre-name {
margin-bottom: -1em;
border-bottom: 3px solid #00000010;
font-family: var(--font-monospace);
text-align: right;
padding-right: 1em;
color: var(--text-med);
z-index: -1;
}
p code,
p kbd,
p samp {
font-family: var(--font-monospace);
font-size: 1rem;
}
p code,
p kbd {
border-radius: var(--border-radius);
padding: 0px 2px;
}
p code {
color: var(--dark-red);
}
pre.r,
pre.js,
pre.md,
pre.markdown,
pre.yaml,
pre.json,
pre.bash,
pre.html,
pre.css {
background: none;
}
pre.r::after,
pre.js::after,
pre.md::after,
pre.markdown::after,
pre.yaml::after,
pre.json::after,
pre.bash::after,
pre.html::after,
pre.css::after {
text-transform: uppercase;
font-family: var(--font-header);
left: -1.35em;
bottom: -1.1em;
transform-origin: top left;
transform: rotate(-90deg);
}
pre.pre-hide-filetype,
.pre-hide-filetype pre::after {
content: '';
}
pre.pre-hide-border,
.pre-hide-border pre {
border-color: transparent;
}
div.sourceCode {
overflow: visible;
}
pre > code.sourceCode {
white-space: pre;
position: relative;
overflow: auto;
max-width: 100%;
display: inline-block;
}

div[id^="out-"] > pre:empty {
display: none;
}
</style>
  <style type="text/css">pre.numberSource {
border-width: 3px;
margin-left: 0;
}
pre.numberSource code > span > a:first-child:before {
left: -1em;
}
code.sourceCode > span > a:first-child:before {
text-decoration: none;
}
</style>
  <style type="text/css">.jv__line {
margin: 4px 0;
display: flex;
justify-content: flex-start;
}
.jv__caret-icon {
width: 18px;
text-align: center;
cursor: pointer;
font-size: 1.8em;
line-height: 0.7;
}
.jv__caret-icon .jv__caret-down::before {
content: "\25BE";
}
.jv__caret-icon .jv__caret-right::before {
content: "\25B8";
}
.jv__empty-icon {
width: 18px;
}
.jv__json-type {
margin-right: 4px;
margin-left: 4px;
}
.jv__json-key {
color: #444;
margin-right: 4px;
margin-left: 4px;
}
.jv__json-index {
margin-right: 4px;
margin-left: 4px;
}
.jv__json-separator {
}
.jv__json-value {
margin-left: 8px;
}
.jv__json-number {
color: #f9ae58;
}
.jv__json-boolean {
color: #ec5f66;
}
.jv__json-string {
color: #86b25c;
}
.jv__json-size {
margin-right: 4px;
margin-left: 4px;
}
.jv__hide {
display: none;
}
</style>
  <script>!function(){"use strict";function createElement(type,config){const htmlElement=document.createElement(type);return void 0===config?htmlElement:(config.className&&(htmlElement.className=config.className),config.content&&(htmlElement.textContent=config.content),config.children&&config.children.forEach(el=>{null!==el&&htmlElement.appendChild(el)}),htmlElement)}function createExpandedElement(node){const iElem=createElement("span");node.expanded?iElem.className="jv__caret jv__caret-down":iElem.className="jv__caret jv__caret-right";const caretElem=createElement("div",{className:"jv__caret-icon",children:[iElem]}),handleClick=node.toggle.bind(node);caretElem.addEventListener("click",handleClick);const indexElem=createElement("div",{className:"jv__json-index",content:node.key}),typeElem=createElement("div",{className:"jv__json-type",content:node.type}),keyElem=createElement("div",{className:"jv__json-key",content:node.key}),sizeElem=createElement("div",{className:"jv__json-size"});let lineChildren;"array"===node.type?sizeElem.innerText="["+node.children.length+"]":"object"===node.type&&(sizeElem.innerText="{"+node.children.length+"}");const lineElem=createElement("div",{className:"jv__line",children:lineChildren=null===node.key?[caretElem,typeElem,sizeElem]:"array"===node.parent.type?[caretElem,indexElem,sizeElem]:[caretElem,keyElem,sizeElem]});return node.depth>0&&(lineElem.style="margin-left: "+24*node.depth+"px;"),lineElem}function createNotExpandedElement(node){const caretElem=createElement("div",{className:"jv__empty-icon"}),keyElem=createElement("div",{className:"jv__json-key",content:node.key}),separatorElement=createElement("div",{className:"jv__json-separator",content:":"}),valueElement=createElement("div",{className:"jv__json-value"+(" jv__json-"+typeof node.value),content:String(node.value)}),lineElem=createElement("div",{className:"jv__line",children:[caretElem,keyElem,separatorElement,valueElement]});return node.depth>0&&(lineElem.style="margin-left: "+24*node.depth+"px;"),lineElem}function createNode(){return{key:null,parent:null,value:null,expanded:!1,type:null,children:null,elem:null,depth:0,setCaretIconRight(){this.elem.querySelector(".jv__caret").classList.replace("jv__caret-down","jv__caret-right")},setCaretIconDown(){this.elem.querySelector(".jv__caret").classList.replace("jv__caret-right","jv__caret-down")},hideChildren(){null!==this.children&&this.children.forEach(item=>{item.elem.classList.add("jv__hide"),item.expanded&&item.hideChildren()})},showChildren(){null!==this.children&&this.children.forEach(item=>{item.elem.classList.remove("jv__hide"),item.expanded&&item.showChildren()})},toggle:function(){this.expanded?(this.expanded=!1,this.hideChildren(),this.setCaretIconRight()):(this.expanded=!0,this.showChildren(),this.setCaretIconDown())}}}function getType(val){let type=typeof val;return Array.isArray(val)?type="array":null===val&&(type="null"),type}function createTree(obj){const tree=createNode();return tree.type=getType(obj),tree.children=[],tree.expanded=!0,function traverseObject(obj,parent){for(let key in obj){const child=createNode();child.parent=parent,child.key=key,child.type=getType(obj[key]),child.depth=parent.depth+1,child.expanded=!1,"object"==typeof obj[key]?(child.children=[],parent.children.push(child),traverseObject(obj[key],child),child.elem=createExpandedElement(child)):(child.value=obj[key],child.elem=createNotExpandedElement(child),parent.children.push(child))}}(obj,tree),tree.elem=createExpandedElement(tree),tree}function render(tree,targetElem){let rootElem;rootElem=targetElem?document.querySelector(targetElem):document.body,function traverseTree(node,callback){callback(node),null!==node.children&&node.children.forEach(item=>{traverseTree(item,callback)})}(tree,node=>{node.expanded||node.hideChildren(),rootElem.appendChild(node.elem)})}window.jsonView={format:function(jsonData,targetElem){let parsedData=jsonData;("string"==typeof jsonData||jsonData instanceof String)&&(parsedData=JSON.parse(jsonData)),render(createTree(parsedData),targetElem)}}}();</script>
  <style type="text/css">.jslog-boolean {color: #007BFF;}
.jslog-undefined {color: #9e0059;}
.jslog-object {color: #DC3545;}
.jslog-string {color: #28A745;}
.jslog-number {color: #17A2B8;}
.jslog-error {color: #ff70a3;}
</style>
  <script>var global = {}

const nodeListInclude = ['id', 'tagName', 'className', 'childNodes']

function domToObj (del) {
  // https://stackoverflow.com/a/46881092/2022615
  const obj = {}
  for (const prop of nodeListInclude) {
    if (del[prop] instanceof NodeList) {
      obj[prop] = Array.from(del[prop])
    } else {
      obj[prop] = del[prop]
    }
  }
  return obj
}

function escapeHTML (string) {
  return ('' + string)
    .replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
}

const redirectLogger = (function (origConsole) {
  const consoleEvent = new Event('consoleLog')
  return function (logDiv, returnConsole = false) {
    if (!logDiv) return origConsole
    const console = {
      log: function () {
        // https://stackoverflow.com/a/45387558/2022615
        let output = ''

        for (const arg of arguments) {
          if (arg instanceof Error) {
            output += '<span class="jslog-error">'
          } else {
            output += `<span class="jslog-${typeof arg}">`
          }

          if (arg instanceof Node) {
            const argObj = domToObj(arg)
            output = output.replace('(object)', '(Node)')
            output += JSON.stringify(argObj, null, 2)
          } else if (
            arg instanceof Error
          ) {
            output += `[${arg.name}] ${arg.message}`
          } else if (
            typeof arg === 'object' &&
            typeof JSON === 'object' &&
            typeof JSON.stringify === 'function'
          ) {
            const outJsonString = JSON.stringify(arg)
            if (outJsonString.length < 60) {
              output += escapeHTML(outJsonString)
            } else {
              output += escapeHTML(JSON.stringify(arg, null, 2))
            }
          } else {
            output += escapeHTML(arg)
          }

          output += '</span>&nbsp;'
        }

        logDiv.innerHTML += output + '<br>'
        logDiv.dispatchEvent(consoleEvent)
        // origConsole.log.apply(undefined, arguments);
      },
      table: function (obj) {
        let table = '<table><thead><tr><th>(index)</th><th>Values</th></tr></thead><tbody>'
        for (const index in obj) {
          if (Object.prototype.hasOwnProperty.call(obj, index)) {
            table += `<tr><td>${index}</td><td><code>${obj[index].toString()}</code></td></tr>`
          }
        }
        table += '</tbody></table>'
        logDiv.innerHTML += table + '<br>'
        logDiv.dispatchEvent(consoleEvent)
      },
      clear: function () {
        logDiv.innerHTML = ''
      }
    }

    if (returnConsole) {
      return (console)
    };

    return function (code) {
      try {
        const ret = eval(code)
        if (typeof ret !== 'undefined') console.log(ret)
      } catch (error) {
        console.log(error)
      }
    }
  }
})(window.console)
</script>
  <script>// https://d3js.org/d3-array/ v2.12.1 Copyright 2021 Mike Bostock
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).d3=t.d3||{})}(this,(function(t){"use strict";function n(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function r(t){let r=t,e=t;function o(t,n,r,o){for(null==r&&(r=0),null==o&&(o=t.length);r<o;){const f=r+o>>>1;e(t[f],n)<0?r=f+1:o=f}return r}return 1===t.length&&(r=(n,r)=>t(n)-r,e=function(t){return(r,e)=>n(t(r),e)}(t)),{left:o,center:function(t,n,e,f){null==e&&(e=0),null==f&&(f=t.length);const i=o(t,n,e,f-1);return i>e&&r(t[i-1],n)>-r(t[i],n)?i-1:i},right:function(t,n,r,o){for(null==r&&(r=0),null==o&&(o=t.length);r<o;){const f=r+o>>>1;e(t[f],n)>0?o=f:r=f+1}return r}}}function e(t){return null===t?NaN:+t}const o=r(n),f=o.right,i=o.left,u=r(e).center;function l(t,n){let r=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&++r;else{let e=-1;for(let o of t)null!=(o=n(o,++e,t))&&(o=+o)>=o&&++r}return r}function s(t){return 0|t.length}function c(t){return!(t>0)}function a(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function h(t,n){let r,e=0,o=0,f=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(r=n-o,o+=r/++e,f+=r*(n-o));else{let i=-1;for(let u of t)null!=(u=n(u,++i,t))&&(u=+u)>=u&&(r=u-o,o+=r/++e,f+=r*(u-o))}if(e>1)return f/(e-1)}function d(t,n){const r=h(t,n);return r?Math.sqrt(r):r}function p(t,n){let r,e;if(void 0===n)for(const n of t)null!=n&&(void 0===r?n>=n&&(r=e=n):(r>n&&(r=n),e<n&&(e=n)));else{let o=-1;for(let f of t)null!=(f=n(f,++o,t))&&(void 0===r?f>=f&&(r=e=f):(r>f&&(r=f),e<f&&(e=f)))}return[r,e]}class y{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let e=0;e<this._n&&e<32;e++){const o=n[e],f=t+o,i=Math.abs(t)<Math.abs(o)?t-(f-o):o-(f-t);i&&(n[r++]=i),t=f}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n,r,e,o=this._n,f=0;if(o>0){for(f=t[--o];o>0&&(n=f,r=t[--o],f=n+r,e=r-(f-n),!e););o>0&&(e<0&&t[o-1]<0||e>0&&t[o-1]>0)&&(r=2*e,n=f+r,r==n-f&&(f=n))}return f}}class v extends Map{constructor(t,n=b){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(g(this,t))}has(t){return super.has(g(this,t))}set(t,n){return super.set(M(this,t),n)}delete(t){return super.delete(w(this,t))}}class m extends Set{constructor(t,n=b){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const n of t)this.add(n)}has(t){return super.has(g(this,t))}add(t){return super.add(M(this,t))}delete(t){return super.delete(w(this,t))}}function g({_intern:t,_key:n},r){const e=n(r);return t.has(e)?t.get(e):r}function M({_intern:t,_key:n},r){const e=n(r);return t.has(e)?t.get(e):(t.set(e,r),r)}function w({_intern:t,_key:n},r){const e=n(r);return t.has(e)&&(r=t.get(r),t.delete(e)),r}function b(t){return null!==t&&"object"==typeof t?t.valueOf():t}function A(t){return t}function x(t,...n){return k(t,A,A,n)}function S(t,n,...r){return k(t,A,n,r)}function _(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function k(t,n,r,e){return function t(o,f){if(f>=e.length)return r(o);const i=new v,u=e[f++];let l=-1;for(const t of o){const n=u(t,++l,o),r=i.get(n);r?r.push(t):i.set(n,[t])}for(const[n,r]of i)i.set(n,t(r,f));return n(i)}(t,0)}function T(t,n){return Array.from(n,(n=>t[n]))}function j(t,...r){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[e=n]=r;if(1===e.length||r.length>1){const o=Uint32Array.from(t,((t,n)=>n));return r.length>1?(r=r.map((n=>t.map(n))),o.sort(((t,e)=>{for(const o of r){const r=n(o[t],o[e]);if(r)return r}}))):(e=t.map(e),o.sort(((t,r)=>n(e[t],e[r])))),T(t,o)}return t.sort(e)}var E=Array.prototype.slice;function N(t){return function(){return t}}var q=Math.sqrt(50),F=Math.sqrt(10),I=Math.sqrt(2);function O(t,n,r){var e,o,f,i,u=-1;if(r=+r,(t=+t)===(n=+n)&&r>0)return[t];if((e=n<t)&&(o=t,t=n,n=o),0===(i=L(t,n,r))||!isFinite(i))return[];if(i>0){let r=Math.round(t/i),e=Math.round(n/i);for(r*i<t&&++r,e*i>n&&--e,f=new Array(o=e-r+1);++u<o;)f[u]=(r+u)*i}else{i=-i;let r=Math.round(t*i),e=Math.round(n*i);for(r/i<t&&++r,e/i>n&&--e,f=new Array(o=e-r+1);++u<o;)f[u]=(r+u)/i}return e&&f.reverse(),f}function L(t,n,r){var e=(n-t)/Math.max(0,r),o=Math.floor(Math.log(e)/Math.LN10),f=e/Math.pow(10,o);return o>=0?(f>=q?10:f>=F?5:f>=I?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(f>=q?10:f>=F?5:f>=I?2:1)}function P(t,n,r){let e;for(;;){const o=L(t,n,r);if(o===e||0===o||!isFinite(o))return[t,n];o>0?(t=Math.floor(t/o)*o,n=Math.ceil(n/o)*o):o<0&&(t=Math.ceil(t*o)/o,n=Math.floor(n*o)/o),e=o}}function z(t){return Math.ceil(Math.log(l(t))/Math.LN2)+1}function C(){var t=A,n=p,r=z;function e(e){Array.isArray(e)||(e=Array.from(e));var o,i,u=e.length,l=new Array(u);for(o=0;o<u;++o)l[o]=t(e[o],o,e);var s=n(l),c=s[0],a=s[1],h=r(l,c,a);if(!Array.isArray(h)){const t=a,r=+h;if(n===p&&([c,a]=P(c,a,r)),(h=O(c,a,r))[h.length-1]>=a)if(t>=a&&n===p){const t=L(c,a,r);isFinite(t)&&(t>0?a=(Math.floor(a/t)+1)*t:t<0&&(a=(Math.ceil(a*-t)+1)/-t))}else h.pop()}for(var d=h.length;h[0]<=c;)h.shift(),--d;for(;h[d-1]>a;)h.pop(),--d;var y,v=new Array(d+1);for(o=0;o<=d;++o)(y=v[o]=[]).x0=o>0?h[o-1]:c,y.x1=o<d?h[o]:a;for(o=0;o<u;++o)c<=(i=l[o])&&i<=a&&v[f(h,i,0,d)].push(e[o]);return v}return e.value=function(n){return arguments.length?(t="function"==typeof n?n:N(n),e):t},e.domain=function(t){return arguments.length?(n="function"==typeof t?t:N([t[0],t[1]]),e):n},e.thresholds=function(t){return arguments.length?(r="function"==typeof t?t:Array.isArray(t)?N(E.call(t)):N(t),e):r},e}function D(t,n){let r;if(void 0===n)for(const n of t)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let e=-1;for(let o of t)null!=(o=n(o,++e,t))&&(r<o||void 0===r&&o>=o)&&(r=o)}return r}function R(t,n){let r;if(void 0===n)for(const n of t)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let e=-1;for(let o of t)null!=(o=n(o,++e,t))&&(r>o||void 0===r&&o>=o)&&(r=o)}return r}function U(t,r,e=0,o=t.length-1,f=n){for(;o>e;){if(o-e>600){const n=o-e+1,i=r-e+1,u=Math.log(n),l=.5*Math.exp(2*u/3),s=.5*Math.sqrt(u*l*(n-l)/n)*(i-n/2<0?-1:1);U(t,r,Math.max(e,Math.floor(r-i*l/n+s)),Math.min(o,Math.floor(r+(n-i)*l/n+s)),f)}const n=t[r];let i=e,u=o;for(B(t,e,r),f(t[o],n)>0&&B(t,e,o);i<u;){for(B(t,i,u),++i,--u;f(t[i],n)<0;)++i;for(;f(t[u],n)>0;)--u}0===f(t[e],n)?B(t,e,u):(++u,B(t,u,o)),u<=r&&(e=u+1),r<=u&&(o=u-1)}return t}function B(t,n,r){const e=t[n];t[n]=t[r],t[r]=e}function G(t,n,r){if(e=(t=Float64Array.from(function*(t,n){if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let r=-1;for(let e of t)null!=(e=n(e,++r,t))&&(e=+e)>=e&&(yield e)}}(t,r))).length){if((n=+n)<=0||e<2)return R(t);if(n>=1)return D(t);var e,o=(e-1)*n,f=Math.floor(o),i=D(U(t,f).subarray(0,f+1));return i+(R(t.subarray(f+1))-i)*(o-f)}}function H(t,n){let r,e=-1,o=-1;if(void 0===n)for(const n of t)++o,null!=n&&(r<n||void 0===r&&n>=n)&&(r=n,e=o);else for(let f of t)null!=(f=n(f,++o,t))&&(r<f||void 0===r&&f>=f)&&(r=f,e=o);return e}function J(t,n){let r,e=-1,o=-1;if(void 0===n)for(const n of t)++o,null!=n&&(r>n||void 0===r&&n>=n)&&(r=n,e=o);else for(let f of t)null!=(f=n(f,++o,t))&&(r>f||void 0===r&&f>=f)&&(r=f,e=o);return e}function K(t,n){return[t,n]}function Q(t,r=n){if(1===r.length)return J(t,r);let e,o=-1,f=-1;for(const n of t)++f,(o<0?0===r(n,n):r(n,e)<0)&&(e=n,o=f);return o}var V=W(Math.random);function W(t){return function(n,r=0,e=n.length){let o=e-(r=+r);for(;o;){const e=t()*o--|0,f=n[o+r];n[o+r]=n[e+r],n[e+r]=f}return n}}function X(t){if(!(o=t.length))return[];for(var n=-1,r=R(t,Y),e=new Array(r);++n<r;)for(var o,f=-1,i=e[n]=new Array(o);++f<o;)i[f]=t[f][n];return e}function Y(t){return t.length}function Z(t){return t instanceof Set?t:new Set(t)}function $(t,n){const r=t[Symbol.iterator](),e=new Set;for(const t of n){if(e.has(t))continue;let n,o;for(;({value:n,done:o}=r.next());){if(o)return!1;if(e.add(n),Object.is(t,n))break}}return!0}t.Adder=y,t.InternMap=v,t.InternSet=m,t.ascending=n,t.bin=C,t.bisect=f,t.bisectCenter=u,t.bisectLeft=i,t.bisectRight=f,t.bisector=r,t.count=l,t.cross=function(...t){const n="function"==typeof t[t.length-1]&&function(t){return n=>t(...n)}(t.pop()),r=(t=t.map(a)).map(s),e=t.length-1,o=new Array(e+1).fill(0),f=[];if(e<0||r.some(c))return f;for(;;){f.push(o.map(((n,r)=>t[r][n])));let i=e;for(;++o[i]===r[i];){if(0===i)return n?f.map(n):f;o[i--]=0}}},t.cumsum=function(t,n){var r=0,e=0;return Float64Array.from(t,void 0===n?t=>r+=+t||0:o=>r+=+n(o,e++,t)||0)},t.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},t.deviation=d,t.difference=function(t,...n){t=new Set(t);for(const r of n)for(const n of r)t.delete(n);return t},t.disjoint=function(t,n){const r=n[Symbol.iterator](),e=new Set;for(const n of t){if(e.has(n))return!1;let t,o;for(;({value:t,done:o}=r.next())&&!o;){if(Object.is(n,t))return!1;e.add(t)}}return!0},t.every=function(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");let r=-1;for(const e of t)if(!n(e,++r,t))return!1;return!0},t.extent=p,t.fcumsum=function(t,n){const r=new y;let e=-1;return Float64Array.from(t,void 0===n?t=>r.add(+t||0):o=>r.add(+n(o,++e,t)||0))},t.filter=function(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");const r=[];let e=-1;for(const o of t)n(o,++e,t)&&r.push(o);return r},t.fsum=function(t,n){const r=new y;if(void 0===n)for(let n of t)(n=+n)&&r.add(n);else{let e=-1;for(let o of t)(o=+n(o,++e,t))&&r.add(o)}return+r},t.greatest=function(t,r=n){let e,o=!1;if(1===r.length){let f;for(const i of t){const t=r(i);(o?n(t,f)>0:0===n(t,t))&&(e=i,f=t,o=!0)}}else for(const n of t)(o?r(n,e)>0:0===r(n,n))&&(e=n,o=!0);return e},t.greatestIndex=function(t,r=n){if(1===r.length)return H(t,r);let e,o=-1,f=-1;for(const n of t)++f,(o<0?0===r(n,n):r(n,e)>0)&&(e=n,o=f);return o},t.group=x,t.groupSort=function(t,r,e){return(1===r.length?j(S(t,r,e),(([t,r],[e,o])=>n(r,o)||n(t,e))):j(x(t,e),(([t,e],[o,f])=>r(e,f)||n(t,o)))).map((([t])=>t))},t.groups=function(t,...n){return k(t,Array.from,A,n)},t.histogram=C,t.index=function(t,...n){return k(t,A,_,n)},t.indexes=function(t,...n){return k(t,Array.from,_,n)},t.intersection=function(t,...n){t=new Set(t),n=n.map(Z);t:for(const r of t)for(const e of n)if(!e.has(r)){t.delete(r);continue t}return t},t.least=function(t,r=n){let e,o=!1;if(1===r.length){let f;for(const i of t){const t=r(i);(o?n(t,f)<0:0===n(t,t))&&(e=i,f=t,o=!0)}}else for(const n of t)(o?r(n,e)<0:0===r(n,n))&&(e=n,o=!0);return e},t.leastIndex=Q,t.map=function(t,n){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof n)throw new TypeError("mapper is not a function");return Array.from(t,((r,e)=>n(r,e,t)))},t.max=D,t.maxIndex=H,t.mean=function(t,n){let r=0,e=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(++r,e+=n);else{let o=-1;for(let f of t)null!=(f=n(f,++o,t))&&(f=+f)>=f&&(++r,e+=f)}if(r)return e/r},t.median=function(t,n){return G(t,.5,n)},t.merge=function(t){return Array.from(function*(t){for(const n of t)yield*n}(t))},t.min=R,t.minIndex=J,t.nice=P,t.pairs=function(t,n=K){const r=[];let e,o=!1;for(const f of t)o&&r.push(n(e,f)),e=f,o=!0;return r},t.permute=T,t.quantile=G,t.quantileSorted=function(t,n,r=e){if(o=t.length){if((n=+n)<=0||o<2)return+r(t[0],0,t);if(n>=1)return+r(t[o-1],o-1,t);var o,f=(o-1)*n,i=Math.floor(f),u=+r(t[i],i,t);return u+(+r(t[i+1],i+1,t)-u)*(f-i)}},t.quickselect=U,t.range=function(t,n,r){t=+t,n=+n,r=(o=arguments.length)<2?(n=t,t=0,1):o<3?1:+r;for(var e=-1,o=0|Math.max(0,Math.ceil((n-t)/r)),f=new Array(o);++e<o;)f[e]=t+e*r;return f},t.reduce=function(t,n,r){if("function"!=typeof n)throw new TypeError("reducer is not a function");const e=t[Symbol.iterator]();let o,f,i=-1;if(arguments.length<3){if(({done:o,value:r}=e.next()),o)return;++i}for(;({done:o,value:f}=e.next()),!o;)r=n(r,f,++i,t);return r},t.reverse=function(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()},t.rollup=S,t.rollups=function(t,n,...r){return k(t,Array.from,n,r)},t.scan=function(t,n){const r=Q(t,n);return r<0?void 0:r},t.shuffle=V,t.shuffler=W,t.some=function(t,n){if("function"!=typeof n)throw new TypeError("test is not a function");let r=-1;for(const e of t)if(n(e,++r,t))return!0;return!1},t.sort=j,t.subset=function(t,n){return $(n,t)},t.sum=function(t,n){let r=0;if(void 0===n)for(let n of t)(n=+n)&&(r+=n);else{let e=-1;for(let o of t)(o=+n(o,++e,t))&&(r+=o)}return r},t.superset=$,t.thresholdFreedmanDiaconis=function(t,n,r){return Math.ceil((r-n)/(2*(G(t,.75)-G(t,.25))*Math.pow(l(t),-1/3)))},t.thresholdScott=function(t,n,r){return Math.ceil((r-n)/(3.5*d(t)*Math.pow(l(t),-1/3)))},t.thresholdSturges=z,t.tickIncrement=L,t.tickStep=function(t,n,r){var e=Math.abs(n-t)/Math.max(0,r),o=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),f=e/o;return f>=q?o*=10:f>=F?o*=5:f>=I&&(o*=2),n<t?-o:o},t.ticks=O,t.transpose=X,t.union=function(...t){const n=new Set;for(const r of t)for(const t of r)n.add(t);return n},t.variance=h,t.zip=function(){return X(arguments)},Object.defineProperty(t,"__esModule",{value:!0})}));
</script>
  <script>(function(l,h){typeof exports=="object"&&typeof module!="undefined"?h(exports,require("d3-array")):typeof define=="function"&&define.amd?define(["exports","d3-array"],h):(l=typeof globalThis!="undefined"?globalThis:l||self,h(l.Tidy={},l.d3))})(this,function(l,h){"use strict";function A(n,...t){if(typeof n=="function")throw new Error("You must supply the data as the first argument to tidy()");let e=n;for(const u of t)u&&(e=u(e));return e}function sn(n){return e=>e.filter(n)}function ln(n,t){return u=>{if(typeof n=="function"){if(!n(u))return u}else if(!n)return u;return A(u,...t)}}function fn(n){return e=>e.map(n)}function j(n){return n==null?[]:Array.isArray(n)?n:[n]}function an(n){return e=>{if(n=j(n),!n.length){const o=new Set;for(const s of e)o.add(s);return Array.from(o)}const u=new Map,r=[],c=n[n.length-1];for(const o of e){let s=u,f=!1;for(const i of n){const a=typeof i=="function"?i(o):o[i];if(i===c){f=s.has(a),f||(r.push(o),s.set(a,!0));break}s.has(a)||s.set(a,new Map),s=s.get(a)}}return r}}function k(n){return e=>{const u=j(n).map(r=>typeof r=="function"?r:H(r));return e.slice().sort((r,c)=>{for(const o of u){const s=o(r,c);if(s)return s}return 0})}}function H(n){const t=typeof n=="function"?n:e=>e[n];return function(u,r){return P(t(u),t(r),!1)}}function C(n){const t=typeof n=="function"?n:e=>e[n];return function(u,r){return P(t(u),t(r),!0)}}function mn(n,t,e){let{position:u="start"}=e!=null?e:{};const r=u==="end"?-1:1,c=new Map;for(let s=0;s<t.length;++s)c.set(t[s],s);const o=typeof n=="function"?n:s=>s[n];return function(f,i){var a,m;const d=(a=c.get(o(f)))!=null?a:-1,y=(m=c.get(o(i)))!=null?m:-1;return d>=0&&y>=0?d-y:d>=0?r*-1:y>=0?r*1:0}}function P(n,t,e){let u=e?t:n,r=e?n:t;if(z(u)&&z(r)){const s=(u!==u?0:u===null?1:2)-(r!==r?0:r===null?1:2);return e?-s:s}return z(u)?e?-1:1:z(r)?e?1:-1:h.ascending(u,r)}function z(n){return n==null||n!==n}function L(n,t){return u=>{t=t!=null?t:{};const r={},c=Object.keys(n);for(const o of c)r[o]=n[o](u);if(t.rest&&u.length){const o=Object.keys(u[0]);for(const s of o)c.includes(s)||(r[s]=t.rest(s)(u))}return[r]}}function R(n,t,e,u){if(!n.length)return[];const r={};let c;if(u==null)c=Object.keys(n[0]);else{c=[];for(const o of j(u))typeof o=="function"?c.push(...o(n)):c.push(o)}for(const o of c){if(e){const s=n.map(f=>f[o]);if(!e(s))continue}r[o]=t(o)(n)}return[r]}function Y(n){return e=>R(e,n)}function J(n,t){return u=>R(u,t,n)}function Z(n,t){return u=>R(u,t,void 0,n)}function M(n){return e=>{const u=[];for(const r of e){const c={...r};for(const o in n){const s=n[o],f=typeof s=="function"?s(c):s;c[o]=f}u.push(c)}return u}}function dn(n,t){return u=>{const r=L(n)(u),c=M(t)(r);return[...u,...c]}}function yn(n,t){return u=>{const r=Y(n)(u),c=M(t)(r);return[...u,...c]}}function pn(n,t,e){return r=>{const c=J(n,t)(r),o=M(e)(c);return[...r,...o]}}function hn(n,t,e){return r=>{const c=Z(n,t)(r),o=M(e)(c);return[...r,...o]}}function $(n,t){if(n==null||typeof n!="object"||Array.isArray(n))return n;const e=Object.fromEntries(t.filter(u=>typeof u[0]!="function"));return Object.assign(e,n)}function E(n,t,e,u,r,c=0){for(const[o,s]of n.entries()){const f=[...e,o];if(s instanceof Map){const i=u(t,f,c);E(s,i,f,u,r,c+1)}else r(t,f,s,c)}return t}function gn(n,t,e=u=>u[u.length-1]){function u(o,s){const f=new Map;return o.set(e(s),f),f}function r(o,s,f){o.set(e(s),t(f,s))}const c=new Map;return E(n,c,[],u,r),c}const K=n=>n;function b(n,t,e){return typeof t=="function"?t=[t]:arguments.length===2&&t!=null&&!Array.isArray(t)&&(e=t),r=>{const c=bn(r,n),o=_n(c,t,e==null?void 0:e.addGroupKeys);if(e==null?void 0:e.export)switch(e.export){case"grouped":return o;case"levels":return W(o,e);case"entries-obj":case"entriesObject":return W(o,{...e,export:"levels",levels:["entries-object"]});default:return W(o,{...e,export:"levels",levels:[e.export]})}return vn(o,e==null?void 0:e.addGroupKeys)}}b.grouped=n=>({...n,export:"grouped"}),b.entries=n=>({...n,export:"entries"}),b.entriesObject=n=>({...n,export:"entries-object"}),b.object=n=>({...n,export:"object"}),b.map=n=>({...n,export:"map"}),b.keys=n=>({...n,export:"keys"}),b.values=n=>({...n,export:"values"}),b.levels=n=>({...n,export:"levels"});function _n(n,t,e){let u=n;if(!(t==null?void 0:t.length))return u;for(const r of t)!r||(u=gn(u,(c,o)=>{let f=r(c,{groupKeys:o});return e!==!1&&(f=f.map(i=>$(i,o))),f}));return u}function bn(n,t){const e=j(t).map((r,c)=>{const o=typeof r=="function"?r:f=>f[r],s=new Map;return f=>{const i=o(f),a=typeof i=="object"?i.valueOf():i;if(s.has(a))return s.get(a);const m=[r,i];return s.set(a,m),m}});return h.group(n,...e)}function vn(n,t){const e=[];return E(n,e,[],K,(u,r,c)=>{let o=c;t!==!1&&(o=c.map(s=>$(s,r))),u.push(...o)}),e}const jn=n=>n.join("/");function Sn(n){var t;const{flat:e,single:u,mapLeaf:r=K,mapLeaves:c=K,addGroupKeys:o}=n;let s;return n.flat&&(s=(t=n.compositeKey)!=null?t:jn),{groupFn:(a,m)=>u?r(o===!1?a[0]:$(a[0],m)):c(a.map(d=>r(o===!1?d:$(d,m)))),keyFn:e?a=>s(a.map(m=>m[1])):a=>a[a.length-1][1]}}function W(n,t){const{groupFn:e,keyFn:u}=Sn(t);let{mapEntry:r=K}=t;const{levels:c=["entries"]}=t,o=[];for(const a of c)switch(a){case"entries":case"entries-object":case"entries-obj":case"entriesObject":{const m=(a==="entries-object"||a==="entries-obj"||a==="entriesObject")&&t.mapEntry==null?([d,y])=>({key:d,values:y}):r;o.push({id:"entries",createEmptySubgroup:()=>[],addSubgroup:(d,y,g,v)=>{d.push(m([g,y],v))},addLeaf:(d,y,g,v)=>{d.push(m([y,g],v))}});break}case"map":o.push({id:"map",createEmptySubgroup:()=>new Map,addSubgroup:(m,d,y)=>{m.set(y,d)},addLeaf:(m,d,y)=>{m.set(d,y)}});break;case"object":o.push({id:"object",createEmptySubgroup:()=>({}),addSubgroup:(m,d,y)=>{m[y]=d},addLeaf:(m,d,y)=>{m[d]=y}});break;case"keys":o.push({id:"keys",createEmptySubgroup:()=>[],addSubgroup:(m,d,y)=>{m.push([y,d])},addLeaf:(m,d)=>{m.push(d)}});break;case"values":o.push({id:"values",createEmptySubgroup:()=>[],addSubgroup:(m,d)=>{m.push(d)},addLeaf:(m,d,y)=>{m.push(y)}});break;default:typeof a=="object"&&o.push(a)}const s=(a,m,d)=>{var y,g;if(t.flat)return a;const v=(y=o[d])!=null?y:o[o.length-1],I=((g=o[d+1])!=null?g:v).createEmptySubgroup();return v.addSubgroup(a,I,u(m),d),I},f=(a,m,d,y)=>{var g;((g=o[y])!=null?g:o[o.length-1]).addLeaf(a,u(m),e(d,m),y)},i=o[0].createEmptySubgroup();return E(n,i,[],s,f)}function Q(){return n=>n.length}function X(n){const t=typeof n=="function"?n:e=>e[n];return e=>h.fsum(e,t)}function x(n){return e=>{const{name:u="n",wt:r}=n!=null?n:{};return L({[u]:r==null?Q():X(r)})(e)}}function kn(n,t){return u=>{t=t!=null?t:{};const{name:r="n",sort:c}=t;return A(u,b(n,[x(t)]),c?k(C(r)):K)}}function Mn(n){return e=>e.map(u=>{var r;const c={},o=Object.keys(u);for(const s of o){const f=(r=n[s])!=null?r:s;c[f]=u[s]}return c})}function T(n,t){return u=>u.slice(n,t)}const wn=n=>T(0,n),Fn=n=>T(-n);function On(n,t){return u=>k(t)(u).slice(0,n)}function Kn(n,t){return u=>typeof t=="function"?k(t)(u).slice(-n).reverse():k(C(t))(u).slice(0,n)}function In(n,t){t=t!=null?t:{};const{replace:e}=t;return r=>{if(!r.length)return r.slice();if(e){const c=[];for(let o=0;o<n;++o)c.push(r[Math.floor(Math.random()*r.length)]);return c}return h.shuffle(r.slice()).slice(0,n)}}function V(n,t){if(n.length===0||t.length===0)return{};const e=Object.keys(n[0]),u=Object.keys(t[0]),r={};for(const c of e)u.includes(c)&&(r[c]=c);return r}function U(n){if(Array.isArray(n)){const t={};for(const e of n)t[e]=e;return t}else if(typeof n=="object")return n;return{[n]:n}}function B(n,t,e){for(const u in e){const r=e[u];if(n[r]!==t[u])return!1}return!0}function An(n,t){return u=>{const r=(t==null?void 0:t.by)==null?V(u,n):U(t.by);return u.flatMap(o=>n.filter(f=>B(o,f,r)).map(f=>({...o,...f})))}}function nn(n,t){return u=>{if(!n.length)return u;const r=(t==null?void 0:t.by)==null?V(u,n):U(t.by),c=Object.keys(n[0]);return u.flatMap(s=>{const f=n.filter(a=>B(s,a,r));if(f.length)return f.map(a=>({...s,...a}));const i=Object.fromEntries(c.filter(a=>s[a]==null).map(a=>[a,void 0]));return{...s,...i}})}}function zn(n,t){return u=>{if(!n.length)return u;if(!u.length)return n;const r=(t==null?void 0:t.by)==null?V(u,n):U(t.by),c=new Map,o=Object.keys(n[0]),s=u.flatMap(f=>{const i=n.filter(m=>{const d=B(f,m,r);return d&&c.set(m,!0),d});if(i.length)return i.map(m=>({...f,...m}));const a=Object.fromEntries(o.filter(m=>f[m]==null).map(m=>[m,void 0]));return{...f,...a}});if(c.size<n.length){const f=Object.fromEntries(Object.keys(u[0]).map(i=>[i,void 0]));for(const i of n)c.has(i)||s.push({...f,...i})}return s}}function $n(n){return e=>{const u=e.map(r=>({...r}));for(const r in n){const c=n[r],o=typeof c=="function"?c(u):c,s=(o==null?void 0:o[Symbol.iterator])&&typeof o!="string"?o:e.map(()=>o);let f=-1;for(const i of u)i[r]=s[++f]}return u}}function w(n){return n.length<1?[]:Object.keys(n[0])}function tn(){return n=>w(n)}function en(n,t){let e=[];for(const c of j(t))typeof c=="function"?e.push(...c(n)):e.push(c);e.length&&e[0][0]==="-"&&(e=[...tn()(n),...e]);const u={},r=[];for(let c=e.length-1;c>=0;c--){const o=e[c];if(o[0]==="-"){u[o.substring(1)]=!0;continue}if(u[o]){u[o]=!1;continue}r.unshift(o)}return e=Array.from(new Set(r)),e}function N(n){return e=>{let u=en(e,n);return u.length?e.map(r=>{const c={};for(const o of u)c[o]=r[o];return c}):e}}function En(n){return e=>{const u=M(n)(e);return N(Object.keys(n))(u)}}function un(n){return e=>typeof n=="function"?[...e,...j(n(e))]:[...e,...j(n)]}function Dn(n){return e=>{const{namesFrom:u,valuesFrom:r,valuesFill:c,valuesFillMap:o,namesSep:s="_"}=n,f=Array.isArray(u)?u:[u],i=Array.isArray(r)?r:[r],a=[];if(!e.length)return a;const m=Object.keys(e[0]).filter(p=>!f.includes(p)&&!i.includes(p)),d={};for(const p of e)for(const _ of f)d[_]==null&&(d[_]={}),d[_][p[_]]=!0;const y=[];for(const p in d)y.push(Object.keys(d[p]));const g={},v=qn(s,y);for(const p of v){if(i.length===1){g[p]=o!=null?o[i[0]]:c;continue}for(const _ of i)g[`${_}${s}${p}`]=o!=null?o[_]:c}function F(p){if(!p.length)return[];const _={...g};for(const S of m)_[S]=p[0][S];for(const S of p){const q=f.map(O=>S[O]).join(s);if(i.length===1){_[q]=S[i[0]];continue}for(const O of i)_[`${O}${s}${q}`]=S[O]}return[_]}return m.length?A(e,b(m,[F])):F(e)}}function qn(n="_",t){function e(r,c,o){if(!o.length&&c!=null){r.push(c);return}const s=o[0],f=o.slice(1);for(const i of s)e(r,c==null?i:`${c}${n}${i}`,f)}const u=[];return e(u,null,t),u}function Cn(n){return e=>{var u;const{namesTo:r,valuesTo:c,namesSep:o="_"}=n,s=(u=n.cols)!=null?u:[],f=en(e,s),i=Array.isArray(r)?r:[r],a=Array.isArray(c)?c:[c],m=i.length>1,d=a.length>1,y=[];for(const g of e){const v=Object.keys(g).filter(p=>!f.includes(p)),F={};for(const p of v)F[p]=g[p];const I=d?Array.from(new Set(f.map(p=>p.substring(p.indexOf(o)+1)))):f;for(const p of I){const _={...F};for(const S of a){const q=d?`${S}${o}${p}`:p,O=m?p.split(o):[p];let gt=0;for(const _t of i){const bt=O[gt++];_[_t]=bt,_[S]=g[q]}}y.push(_)}}return y}}function rn(n){return e=>{const u=Rn(n),r=[];for(const c in u){const o=u[c];let s;typeof o=="function"?s=o(e):Array.isArray(o)?s=o:s=Array.from(new Set(e.map(f=>f[c]))),r.push(s.map(f=>({[c]:f})))}return Ln(r)}}function Ln(n){function t(u,r,c){if(!c.length&&r!=null){u.push(r);return}const o=c[0],s=c.slice(1);for(const f of o)t(u,{...r,...f},s)}const e=[];return t(e,null,n),e}function Rn(n){if(Array.isArray(n)){const t={};for(const e of n)t[e]=e;return t}else if(typeof n=="object")return n;return{[n]:n}}function on(n,t=1){let[e,u]=h.extent(n);const r=[];let c=e;for(;c<=u;)r.push(c),c+=t;return r}function G(n,t="day",e=1){let[u,r]=h.extent(n);const c=[];let o=new Date(u);for(;o<=r;)if(c.push(new Date(o)),t==="second"||t==="s"||t==="seconds")o.setUTCSeconds(o.getUTCSeconds()+1*e);else if(t==="minute"||t==="min"||t==="minutes")o.setUTCMinutes(o.getUTCMinutes()+1*e);else if(t==="day"||t==="d"||t==="days")o.setUTCDate(o.getUTCDate()+1*e);else if(t==="week"||t==="w"||t==="weeks")o.setUTCDate(o.getUTCDate()+7*e);else if(t==="month"||t==="m"||t==="months")o.setUTCMonth(o.getUTCMonth()+1*e);else if(t==="year"||t==="y"||t==="years")o.setUTCFullYear(o.getUTCFullYear()+1*e);else throw new Error("Invalid granularity for date sequence: "+t);return c}function Wn(n,t){return function(u){t=t!=null?t:1;const r=typeof n=="function"?n:c=>c[n];return on(u.map(r),t)}}function Tn(n,t,e){return function(r){t=t!=null?t:"day",e=e!=null?e:1;const c=typeof n=="function"?n:o=>o[n];return G(r.map(c),t,e)}}function Vn(n,t,e){return function(r){t=t!=null?t:"day",e=e!=null?e:1;const c=typeof n=="function"?n:o=>o[n];return G(r.map(o=>new Date(c(o))),t,e).map(o=>o.toISOString())}}function cn(n){return e=>{const u=[];for(const r of e){const c={...r};for(const o in n)c[o]==null&&(c[o]=n[o]);u.push(c)}return u}}function Un(n,t){return u=>{const r=rn(n)(u),c=nn(u)(r);return t?cn(t)(c):c}}function Bn(n){return e=>{const u=j(n),r={};return e.map(c=>{const o={...c};for(const s of u)o[s]!=null?r[s]=o[s]:r[s]!=null&&(o[s]=r[s]);return o})}}function Nn(n,t){return(u,r)=>{var c;let o="[tidy.debug";if((c=r==null?void 0:r.groupKeys)==null?void 0:c.length){const y=r.groupKeys.map(g=>g.join(": ")).join(", ");y.length&&(o+="|"+y)}t=t!=null?t:{};const{limit:s=10,output:f="table"}=t,i="--------------------------------------------------------------------------------";let a=i.length;const m=o+"]"+(n==null?"":" "+n);return a=Math.max(0,a-(m.length+2)),console.log(`${m} ${i.substring(0,a)}`),console[f](s==null||s>=u.length?u:u.slice(0,s)),u}}function D(n,t,e){return n==null||t==null?void 0:t===0&&n===0?0:!e&&t===0?void 0:n/t}function Gn(n,t,e){return n==null||t==null?e?(n!=null?n:0)-(t!=null?t:0):void 0:n-t}function Hn(n,t,e){return n==null||t==null?e?(n!=null?n:0)+(t!=null?t:0):void 0:n+t}var Pn=Object.freeze({__proto__:null,rate:D,subtract:Gn,add:Hn});function Yn(n,t,e){const u=typeof n=="function"?n:s=>s[n],r=typeof t=="function"?t:s=>s[t],{predicate:c,allowDivideByZero:o}=e!=null?e:{};return c==null?s=>{const f=r(s),i=u(s);return D(i,f,o)}:s=>{if(!c(s))return;const f=r(s),i=u(s);return D(i,f,o)}}function Jn(n,t){let e=new h.Adder,u=0;return Float64Array.from(n,r=>e.add(+(t(r,u++,n)||0)))}function Zn(n,t){let e=0;for(let u=0;u<n.length;++u){const r=t(n[u],u,n);+r===r&&(e+=1)}return e?h.fsum(n,t)/e:void 0}function Qn(n){const t=typeof n=="function"?n:e=>e[n];return e=>Jn(e,t)}function Xn(n,t,e){const{partial:u=!1}=e!=null?e:{};return r=>r.map((c,o)=>{const s=o;if(!u&&s-n+1<0)return;const f=Math.max(0,s-n+1),i=r.slice(f,s+1);return t(i,s)})}function xn(n,t){const e=typeof n=="function"?n:c=>c[n],{n:u=1,default:r}=t!=null?t:{};return c=>c.map((o,s)=>{const f=c[s-u];return f==null?r:e(f)})}function nt(n,t){const e=typeof n=="function"?n:c=>c[n],{n:u=1,default:r}=t!=null?t:{};return c=>c.map((o,s)=>{const f=c[s+u];return f==null?r:e(f)})}function tt(n){const t=typeof n=="function"?n:e=>e[n];return e=>h.min(e,t)}function et(n){const t=typeof n=="function"?n:e=>e[n];return e=>h.max(e,t)}function ut(n){const t=typeof n=="function"?n:e=>e[n];return e=>Zn(e,t)}function rt(n,t){const e=typeof n=="function"?n:r=>r[n],u=typeof t=="function"?t:r=>r[t];return r=>{const c=h.fsum(r,e),o=h.fsum(r,u);return D(c,o)}}function ot(n){const t=typeof n=="function"?n:e=>e[n];return e=>h.median(e,t)}function ct(n){const t=typeof n=="function"?n:e=>e[n];return e=>h.deviation(e,t)}function st(n){const t=typeof n=="function"?n:e=>e[n];return e=>h.variance(e,t)}function lt(n,t={}){const e=typeof n=="function"?n:u=>u[n];return u=>{const r=new Map;let c=0;for(const o of u){const s=e(o);if(!r.has(s)){if(!t.includeUndefined&&s===void 0||t.includeNull===!1&&s===null)continue;c+=1,r.set(s,!0)}}return c}}function ft(n){const t=typeof n=="function"?n:e=>e[n];return e=>e.length?t(e[0]):void 0}function it(n){const t=typeof n=="function"?n:e=>e[n];return e=>e.length?t(e[e.length-1]):void 0}function at(n,t=!0){return e=>{const u=new RegExp(`^${n}`,t?"i":void 0);return w(e).filter(c=>u.test(c))}}function mt(n,t=!0){return e=>{const u=new RegExp(`${n}$`,t?"i":void 0);return w(e).filter(c=>u.test(c))}}function dt(n,t=!0){return e=>{const u=new RegExp(n,t?"i":void 0);return w(e).filter(c=>u.test(c))}}function yt(n){return t=>w(t).filter(u=>n.test(u))}function pt(n,t,e){return u=>{const r=w(u),c=[];for(let o=t[0];o<=t[1];++o){const s=e==null?o:new String("00000000"+o).slice(-e);c.push(`${n}${s}`)}return r.filter(o=>c.includes(o))}}function ht(n){return t=>{let e=new Set;for(const r of j(n))if(typeof r=="function"){const c=r(t);for(const o of c)e.add(o)}else e.add(r);return Array.from(e).map(r=>`-${r}`)}}l.TMath=Pn,l.addItems=un,l.addRows=un,l.arrange=k,l.asc=H,l.complete=Un,l.contains=dt,l.count=kn,l.cumsum=Qn,l.debug=Nn,l.desc=C,l.deviation=ct,l.distinct=an,l.endsWith=mt,l.everything=tn,l.expand=rn,l.fill=Bn,l.filter=sn,l.first=ft,l.fixedOrder=mn,l.fullJoin=zn,l.fullSeq=Wn,l.fullSeqDate=Tn,l.fullSeqDateISOString=Vn,l.groupBy=b,l.innerJoin=An,l.lag=xn,l.last=it,l.lead=nt,l.leftJoin=nn,l.map=fn,l.matches=yt,l.max=et,l.mean=ut,l.meanRate=rt,l.median=ot,l.min=tt,l.mutate=M,l.mutateWithSummary=$n,l.n=Q,l.nDistinct=lt,l.negate=ht,l.numRange=pt,l.pick=N,l.pivotLonger=Cn,l.pivotWider=Dn,l.rate=Yn,l.rename=Mn,l.replaceNully=cn,l.roll=Xn,l.select=N,l.slice=T,l.sliceHead=wn,l.sliceMax=Kn,l.sliceMin=On,l.sliceSample=In,l.sliceTail=Fn,l.sort=k,l.startsWith=at,l.sum=X,l.summarize=L,l.summarizeAll=Y,l.summarizeAt=Z,l.summarizeIf=J,l.tally=x,l.tidy=A,l.total=dn,l.totalAll=yn,l.totalAt=hn,l.totalIf=pn,l.transmute=En,l.variance=st,l.vectorSeq=on,l.vectorSeqDate=G,l.when=ln,Object.defineProperty(l,"__esModule",{value:!0})});
//# sourceMappingURL=tidy.min.js.map
</script>
  <script>/*!
 * clipboard.js v2.0.6
 * https://clipboardjs.com/
 * 
 * Licensed MIT  Zeno Rocha
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ClipboardJS=e():t.ClipboardJS=e()}(this,function(){return o={},r.m=n=[function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var o=window.getSelection(),r=document.createRange();r.selectNodeContents(t),o.removeAllRanges(),o.addRange(r),e=o.toString()}return e}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var o=this;function r(){o.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,r=n.length;o<r;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],r=[];if(o&&e)for(var i=0,a=o.length;i<a;i++)o[i].fn!==e&&o[i].fn._!==e&&r.push(o[i]);return r.length?n[t]=r:delete n[t],this}},t.exports=n,t.exports.TinyEmitter=n},function(t,e,n){var d=n(3),h=n(4);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!d.string(e))throw new TypeError("Second argument must be a String");if(!d.fn(n))throw new TypeError("Third argument must be a Function");if(d.node(t))return s=e,f=n,(u=t).addEventListener(s,f),{destroy:function(){u.removeEventListener(s,f)}};if(d.nodeList(t))return a=t,c=e,l=n,Array.prototype.forEach.call(a,function(t){t.addEventListener(c,l)}),{destroy:function(){Array.prototype.forEach.call(a,function(t){t.removeEventListener(c,l)})}};if(d.string(t))return o=t,r=e,i=n,h(document.body,o,r,i);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var o,r,i,a,c,l,u,s,f}},function(t,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e,n){var a=n(5);function i(t,e,n,o,r){var i=function(e,n,t,o){return function(t){t.delegateTarget=a(t.target,n),t.delegateTarget&&o.call(e,t)}}.apply(this,arguments);return t.addEventListener(n,i,r),{destroy:function(){t.removeEventListener(n,i,r)}}}t.exports=function(t,e,n,o,r){return"function"==typeof t.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return i(t,e,n,o,r)}))}},function(t,e){if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.resolveOptions(t),this.initSelection()}var l=(function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}(c,[{key:"resolveOptions",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=r()(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=r()(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(t){var e=0<arguments.length&&void 0!==t?t:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":i(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),c),u=n(1),s=n.n(u),f=n(2),d=n.n(f),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t};function y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var m=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(v,s.a),p(v,[{key:"resolveOptions",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===h(e.container)?e.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=d()(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return b("action",t)}},{key:"defaultTarget",value:function(t){var e=b("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return b("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(t){var e=0<arguments.length&&void 0!==t?t:["copy","cut"],n="string"==typeof e?[e]:e,o=!!document.queryCommandSupported;return n.forEach(function(t){o=o&&!!document.queryCommandSupported(t)}),o}}]),v);function v(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));return n.resolveOptions(e),n.listenClick(t),n}function b(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}e.default=m}],r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=6).default;function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n,o});</script>
  <style type="text/css">.xaringanextra-clipboard-button {
position: absolute;
top: 0;
right: 0;
font-size: 0.8em;
padding: 0.5em;
display: none;
background-color: transparent;
border: none;
opacity: 0.5;
border-radius: 0;
}
.xaringanextra-clipboard-button:hover {
background-color: rgba(0, 0, 0, 0.1);
border: none;
opacity: 1;
}
:hover > .xaringanextra-clipboard-button {
display: block;
transform: translateY(0);
}
</style>
  <script>/* global slideshow,window,document */
window.xaringanExtraClipboard = function (selector, text) {
  if (!window.ClipboardJS.isSupported()) return
  if (!window.xaringanExtraClipboards) window.xaringanExtraClipboards = {}

  const ready = function (fn) {
    /* MIT License Copyright (c) 2016 Nuclei */
    /* https://github.com/nuclei/readyjs */
    const completed = () => {
      document.removeEventListener('DOMContentLoaded', completed)
      window.removeEventListener('load', completed)
      fn()
    }
    if (document.readyState !== 'loading') {
      setTimeout(fn)
    } else {
      document.addEventListener('DOMContentLoaded', completed)
      window.addEventListener('load', completed)
    }
  }

  ready(function () {
    const {
      button: buttonText = 'Copy Code',
      success: successText = 'Copied!',
      error: errorText = 'Press Ctrl+C to Copy'
    } = text

    const template = '<button class="xaringanextra-clipboard-button" ' +
       `type="button" aria-label="Copy code to clipboard">${buttonText}</button>`

    const isRemarkSlideshow = typeof slideshow !== 'undefined' &&
      Object.prototype.hasOwnProperty.call(slideshow, 'getSlides')

    let siblingSelector = selector || 'pre'
    if (!selector && isRemarkSlideshow) {
      siblingSelector = '.remark-slides-area ' + siblingSelector
    }

    // insert <button>s
    document.querySelectorAll(siblingSelector).forEach(el => {
      if ([/^$/, 'inherit', 'unset', 'revert', 'static'].some(p => el.style.position.match(p))) {
        el.style.position = 'relative'
      }
      el.insertAdjacentHTML('beforeend', template)

      // match button text color to code color
      const currentColor = window.getComputedStyle(el.children[0]).getPropertyValue('color')
      el.querySelector('button.xaringanextra-clipboard-button').style.color = currentColor
    })

    // initialize cliboardjs
    const clipboard = new window.ClipboardJS(siblingSelector + ' .xaringanextra-clipboard-button', {
      text: function (trigger) {
        // temporarily remove the button text
        // so that it isn't included in the text that's copied
        const btnLabel = trigger.innerHTML
        trigger.innerHTML = ''
        // snapshot text of copy button's parent element
        const text = trigger.parentElement.innerText
        // restore the button's inner HTML
        trigger.innerHTML = btnLabel
        return text
      }
    })

    // show success text for 2.5 seconds on success
    clipboard.on('success', function (ev) {
      ev.trigger.innerHTML = successText
      ev.trigger.style.display = 'block'
      setTimeout(function () {
        ev.trigger.innerHTML = buttonText
        ev.trigger.style.display = ''
      }, 2500)
      ev.clearSelection()
    })

    // show error text for 2.5 seconds on error
    clipboard.on('error', function (ev) {
      ev.trigger.innerHTML = errorText
      setTimeout(function () { ev.trigger.innerHTML = buttonText }, 2500)
    })

    // block remark click/touch slide change event listeners
    if (isRemarkSlideshow) {
      ['touchstart', 'touchend', 'touchmove'].forEach(function (evType) {
        document.querySelector('.remark-slides-area').addEventListener(evType, function (ev) {
          if (!ev.target.closest('pre')) return
          if (ev.target.closest('pre').querySelector('.xaringanextra-clipboard-button')) {
            ev.stopPropagation()
          }
        })
      })
    }

    window.xaringanExtraClipboards[siblingSelector] = clipboard
  })
}
</script>
  <script>window.xaringanExtraClipboard('pre.r,pre.markdown,pre.js', {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
</head>
<body>



<main>
<h1 id="title" class="toc-ignore">tidy.js for R</h1>



<a href="https://github.com/gadenbuie/tidyjs-r" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#eaecee; color:#2f4858; position: fixed; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}.github-corner:hover .octo-body,.github-corner:hover .octo-arm{color: #993d70; transition: color 500ms ease-in-out;}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<p>Install tidyjs from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># install.packages(&quot;remotes&quot;)</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;gadenbuie/tidyjs-r&quot;</span>)</span></code></pre></div>
<p>To use <code>tidy.js</code> in your R Markdown documents, call <a href="https://github.com/gadenbuie/tidyjs-r/blob/main/R/tidyjs.R">use_tidyjs()</a>. You can then access tidy functions from the <code>Tidy</code> object in your Shiny App or in your R Markdown document inside a JavaScript (<code>js</code>) chunk:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1"></a><span class="bn">```{r echo=FALSE}</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="bn">tidyjs::use_tidyjs()</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="bn">```</span></span>
<span id="cb2-4"><a href="#cb2-4"></a></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="bn">```{js}</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="bn">const { tidy, mutate, arrange, desc } = Tidy;</span></span>
<span id="cb2-7"><a href="#cb2-7"></a></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="bn">const data = [</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="bn">  { a: 1, b: 10 }, </span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="bn">  { a: 3, b: 12 }, </span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="bn">  { a: 2, b: 10 }</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="bn">]</span></span>
<span id="cb2-13"><a href="#cb2-13"></a></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="bn">const results = tidy(</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="bn">  data, </span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="bn">  mutate({ ab: d =&gt; d.a * d.b }),</span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="bn">  arrange(desc(&#39;ab&#39;))</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="bn">)</span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="bn">```</span></span></code></pre></div>
<script type="text/javascript">
const { tidy, mutate, arrange, desc, summarize, sum, groupBy } = Tidy
</script>
<p>The examples below are actually running in your browser. The results of each JavaScript chunk, if executed, are shown below the JavaScript chunk with a gray left border.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1"></a><span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Ready to tidy?&#39;</span>)</span></code></pre></div>
<div id="out-unnamed-chunk-3">
<pre></pre>
</div>
<script type="text/javascript">
const log_out_unnamed_chunk_3 = redirectLogger(document.querySelector("#out-unnamed-chunk-3 > pre"))
document.addEventListener("DOMContentLoaded", function() {
log_out_unnamed_chunk_3(`console.log('Ready to tidy?')`)
})
</script>
<hr />
<h2 id="tidy.js"><a href="https://github.com/pbeshai/tidy">tidy.js</a></h2>
<p><a href="https://app.circleci.com/pipelines/github/pbeshai/tidy"><img src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iODgiIGhlaWdodD0iMjAiIHJvbGU9ImltZyIgYXJpYS1sYWJlbD0iYnVpbGQ6IHBhc3NpbmciPjx0aXRsZT5idWlsZDogcGFzc2luZzwvdGl0bGU+PGxpbmVhckdyYWRpZW50IGlkPSJzIiB4Mj0iMCIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2JiYiIgc3RvcC1vcGFjaXR5PSIuMSIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1vcGFjaXR5PSIuMSIvPjwvbGluZWFyR3JhZGllbnQ+PGNsaXBQYXRoIGlkPSJyIj48cmVjdCB3aWR0aD0iODgiIGhlaWdodD0iMjAiIHJ4PSIzIiBmaWxsPSIjZmZmIi8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjcikiPjxyZWN0IHdpZHRoPSIzNyIgaGVpZ2h0PSIyMCIgZmlsbD0iIzU1NSIvPjxyZWN0IHg9IjM3IiB3aWR0aD0iNTEiIGhlaWdodD0iMjAiIGZpbGw9IiM0YzEiLz48cmVjdCB3aWR0aD0iODgiIGhlaWdodD0iMjAiIGZpbGw9InVybCgjcykiLz48L2c+PGcgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IlZlcmRhbmEsR2VuZXZhLERlamFWdSBTYW5zLHNhbnMtc2VyaWYiIHRleHQtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iIGZvbnQtc2l6ZT0iMTEwIj48dGV4dCBhcmlhLWhpZGRlbj0idHJ1ZSIgeD0iMTk1IiB5PSIxNTAiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiB0ZXh0TGVuZ3RoPSIyNzAiPmJ1aWxkPC90ZXh0Pjx0ZXh0IHg9IjE5NSIgeT0iMTQwIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgZmlsbD0iI2ZmZiIgdGV4dExlbmd0aD0iMjcwIj5idWlsZDwvdGV4dD48dGV4dCBhcmlhLWhpZGRlbj0idHJ1ZSIgeD0iNjE1IiB5PSIxNTAiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiB0ZXh0TGVuZ3RoPSI0MTAiPnBhc3Npbmc8L3RleHQ+PHRleHQgeD0iNjE1IiB5PSIxNDAiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiBmaWxsPSIjZmZmIiB0ZXh0TGVuZ3RoPSI0MTAiPnBhc3Npbmc8L3RleHQ+PC9nPjwvc3ZnPg==" alt="CircleCI" /></a> <a href="https://www.npmjs.com/package/@tidyjs/tidy"><img src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iODAiIGhlaWdodD0iMjAiIHJvbGU9ImltZyIgYXJpYS1sYWJlbD0ibnBtOiB2Mi40LjMiPjx0aXRsZT5ucG06IHYyLjQuMzwvdGl0bGU+PGxpbmVhckdyYWRpZW50IGlkPSJzIiB4Mj0iMCIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2JiYiIgc3RvcC1vcGFjaXR5PSIuMSIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1vcGFjaXR5PSIuMSIvPjwvbGluZWFyR3JhZGllbnQ+PGNsaXBQYXRoIGlkPSJyIj48cmVjdCB3aWR0aD0iODAiIGhlaWdodD0iMjAiIHJ4PSIzIiBmaWxsPSIjZmZmIi8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjcikiPjxyZWN0IHdpZHRoPSIzNSIgaGVpZ2h0PSIyMCIgZmlsbD0iIzU1NSIvPjxyZWN0IHg9IjM1IiB3aWR0aD0iNDUiIGhlaWdodD0iMjAiIGZpbGw9IiMwMDdlYzYiLz48cmVjdCB3aWR0aD0iODAiIGhlaWdodD0iMjAiIGZpbGw9InVybCgjcykiLz48L2c+PGcgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IlZlcmRhbmEsR2VuZXZhLERlamFWdSBTYW5zLHNhbnMtc2VyaWYiIHRleHQtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iIGZvbnQtc2l6ZT0iMTEwIj48dGV4dCBhcmlhLWhpZGRlbj0idHJ1ZSIgeD0iMTg1IiB5PSIxNTAiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiB0ZXh0TGVuZ3RoPSIyNTAiPm5wbTwvdGV4dD48dGV4dCB4PSIxODUiIHk9IjE0MCIgdHJhbnNmb3JtPSJzY2FsZSguMSkiIGZpbGw9IiNmZmYiIHRleHRMZW5ndGg9IjI1MCI+bnBtPC90ZXh0Pjx0ZXh0IGFyaWEtaGlkZGVuPSJ0cnVlIiB4PSI1NjUiIHk9IjE1MCIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyIgdHJhbnNmb3JtPSJzY2FsZSguMSkiIHRleHRMZW5ndGg9IjM1MCI+djIuNC4zPC90ZXh0Pjx0ZXh0IHg9IjU2NSIgeT0iMTQwIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgZmlsbD0iI2ZmZiIgdGV4dExlbmd0aD0iMzUwIj52Mi40LjM8L3RleHQ+PC9nPjwvc3ZnPg==" alt="npm" /></a></p>
<p><strong>Tidy up your data with JavaScript!</strong> Inspired by <a href="https://dplyr.tidyverse.org/">dplyr</a> and the <a href="https://www.tidyverse.org/">tidyverse</a>, tidy.js attempts to bring the ergonomics of data manipulation from R to javascript (and typescript). The primary goals of the project are:</p>
<ul>
<li><p><strong>Readable code</strong>. Tidy.js prioritizes making your data transformations readable, so future you and your teammates can get up and running quickly.</p></li>
<li><p><strong>Standard transformation verbs</strong>. Tidy.js is built using battle-tested verbs from the R community that can handle any data wrangling need.</p></li>
<li><p><strong>Work with plain JS objects</strong>. No wrapper classes needed  all tidy.js needs is an array of plain old-fashioned JS objects to get started. Simple in, simple out.</p></li>
</ul>
<p>Secondarily, this project aims to provide acceptable types for the functions provided.</p>
<h4 id="quick-links">Quick Links</h4>
<ul>
<li><a href="https://github.com/pbeshai/tidy">GitHub repo</a></li>
<li><a href="https://pbeshai.github.io/tidy">Project homepage</a></li>
<li><a href="https://pbeshai.github.io/tidy/docs/api/tidy">API reference documentation</a></li>
<li><a href="https://pbeshai.github.io/tidy/playground">Playground</a></li>
<li><a href="https://observablehq.com/@pbeshai/tidy-js-intro-demo">Observable Notebook</a></li>
<li><a href="https://github.com/pbeshai/tidy/discussions">GitHub Discussions for Q&amp;A</a></li>
<li><a href="https://codesandbox.io/s/tidyjs-umd-example-n1g4r?file=/index.html">CodeSandbox showing basic HTML usage (UMD)</a></li>
</ul>
<h4 id="related-work">Related work</h4>
<p>Be sure to check out a very similar project, <a href="https://github.com/uwdata/arquero">Arquero</a>, from <a href="https://idl.cs.washington.edu/">UW Data</a>.</p>
<h2 id="getting-started">Getting started</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">const</span> <span class="op">{</span> tidy<span class="op">,</span> mutate<span class="op">,</span> arrange<span class="op">,</span> desc <span class="op">}</span> <span class="op">=</span> Tidy</span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="va">window</span>.<span class="at">data</span> <span class="op">=</span> [</span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="op">{</span> <span class="dt">a</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">b</span><span class="op">:</span> <span class="dv">10</span> <span class="op">},</span> </span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="op">{</span> <span class="dt">a</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">b</span><span class="op">:</span> <span class="dv">12</span> <span class="op">},</span> </span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="op">{</span> <span class="dt">a</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">b</span><span class="op">:</span> <span class="dv">10</span> <span class="op">}</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>]</span>
<span id="cb4-8"><a href="#cb4-8"></a></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="kw">const</span> results <span class="op">=</span> <span class="at">tidy</span>(</span>
<span id="cb4-10"><a href="#cb4-10"></a>  data<span class="op">,</span> </span>
<span id="cb4-11"><a href="#cb4-11"></a>  <span class="at">mutate</span>(<span class="op">{</span> <span class="dt">ab</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="va">d</span>.<span class="at">a</span> <span class="op">*</span> <span class="va">d</span>.<span class="at">b</span> <span class="op">}</span>)<span class="op">,</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>  <span class="at">arrange</span>(<span class="at">desc</span>(<span class="st">&#39;ab&#39;</span>))</span>
<span id="cb4-13"><a href="#cb4-13"></a>)</span>
<span id="cb4-14"><a href="#cb4-14"></a></span>
<span id="cb4-15"><a href="#cb4-15"></a>results</span></code></pre></div>
<div id="out-unnamed-chunk-4">
<pre></pre>
</div>
<script type="text/javascript">
const log_out_unnamed_chunk_4 = redirectLogger(document.querySelector("#out-unnamed-chunk-4 > pre"))
document.addEventListener("DOMContentLoaded", function() {
log_out_unnamed_chunk_4(`const { tidy, mutate, arrange, desc } = Tidy

window.data = [
  { a: 1, b: 10 }, 
  { a: 3, b: 12 }, 
  { a: 2, b: 10 }
]

const results = tidy(
  data, 
  mutate({ ab: d => d.a * d.b }),
  arrange(desc('ab'))
)

results`)
})
</script>
<p>All tidy.js code is wrapped in a <strong>tidy flow</strong> via the <code>tidy()</code> function. The first argument is the array of data, followed by the transformation verbs to run on the data. The actual functions passed to <code>tidy()</code> can be anything so long as they fit the form:</p>
<pre><code>(items: object[]) =&gt; object[]</code></pre>
<p>For example, the following is valid:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1"></a><span class="at">tidy</span>(</span>
<span id="cb6-2"><a href="#cb6-2"></a>  data<span class="op">,</span> </span>
<span id="cb6-3"><a href="#cb6-3"></a>  items <span class="kw">=&gt;</span> <span class="va">items</span>.<span class="at">filter</span>((d<span class="op">,</span> i) <span class="kw">=&gt;</span> i <span class="op">%</span> <span class="dv">2</span> <span class="op">===</span> <span class="dv">0</span>)<span class="op">,</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="at">arrange</span>(<span class="at">desc</span>(<span class="st">&#39;value&#39;</span>))</span>
<span id="cb6-5"><a href="#cb6-5"></a>)</span></code></pre></div>
<div id="out-unnamed-chunk-5">
<pre></pre>
</div>
<script type="text/javascript">
const log_out_unnamed_chunk_5 = redirectLogger(document.querySelector("#out-unnamed-chunk-5 > pre"))
document.addEventListener("DOMContentLoaded", function() {
log_out_unnamed_chunk_5(`tidy(
  data, 
  items => items.filter((d, i) => i % 2 === 0),
  arrange(desc('value'))
)`)
})
</script>
<p>All tidy verbs fit this style, with the exception of exports from groupBy, discussed below.</p>
<h3 id="grouping-data-with-groupby">Grouping data with groupBy</h3>
<p>Besides manipulating flat lists of data, tidy provides facilities for wrangling grouped data via the <code>groupBy()</code> function.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">const</span> <span class="op">{</span> tidy<span class="op">,</span> summarize<span class="op">,</span> sum<span class="op">,</span> groupBy <span class="op">}</span> <span class="op">=</span> Tidy</span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="kw">const</span> data <span class="op">=</span> [</span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="op">{</span> <span class="dt">key</span><span class="op">:</span> <span class="st">&#39;group1&#39;</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">10</span> <span class="op">},</span> </span>
<span id="cb7-5"><a href="#cb7-5"></a>  <span class="op">{</span> <span class="dt">key</span><span class="op">:</span> <span class="st">&#39;group2&#39;</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">9</span> <span class="op">},</span> </span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="op">{</span> <span class="dt">key</span><span class="op">:</span> <span class="st">&#39;group1&#39;</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">7</span> <span class="op">}</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>]</span>
<span id="cb7-8"><a href="#cb7-8"></a></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="at">tidy</span>(</span>
<span id="cb7-10"><a href="#cb7-10"></a>  data<span class="op">,</span></span>
<span id="cb7-11"><a href="#cb7-11"></a>  <span class="at">groupBy</span>(<span class="st">&#39;key&#39;</span><span class="op">,</span> [</span>
<span id="cb7-12"><a href="#cb7-12"></a>    <span class="at">summarize</span>(<span class="op">{</span> <span class="dt">total</span><span class="op">:</span> <span class="at">sum</span>(<span class="st">&#39;value&#39;</span>) <span class="op">}</span>)</span>
<span id="cb7-13"><a href="#cb7-13"></a>  ])</span>
<span id="cb7-14"><a href="#cb7-14"></a>)</span></code></pre></div>
<div id="out-unnamed-chunk-6">
<pre></pre>
</div>
<script type="text/javascript">
const log_out_unnamed_chunk_6 = redirectLogger(document.querySelector("#out-unnamed-chunk-6 > pre"))
document.addEventListener("DOMContentLoaded", function() {
log_out_unnamed_chunk_6(`const { tidy, summarize, sum, groupBy } = Tidy

const data = [
  { key: 'group1', value: 10 }, 
  { key: 'group2', value: 9 }, 
  { key: 'group1', value: 7 }
]

tidy(
  data,
  groupBy('key', [
    summarize({ total: sum('value') })
  ])
)`)
})
</script>
<p>The output is:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1"></a>[</span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="op">{</span> <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;group1&quot;</span><span class="op">,</span> <span class="st">&quot;total&quot;</span><span class="op">:</span> <span class="dv">17</span> <span class="op">},</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="op">{</span> <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;group2&quot;</span><span class="op">,</span> <span class="st">&quot;total&quot;</span><span class="op">:</span> <span class="dv">9</span> <span class="op">},</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>]</span></code></pre></div>
<p>The <code>groupBy()</code> function works similarly to <code>tidy()</code> in that it takes a flow of functions as its second argument (wrapped in an array). Things get really fun when you use groupBys <em>third</em> argument for exporting the grouped data into different shapes.</p>
<p>For example, exporting data as a nested object, we can use <code>groupBy.object()</code> as the third argument to <code>groupBy()</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1"></a><span class="va">window</span>.<span class="at">data</span> <span class="op">=</span> [</span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="op">{</span> <span class="dt">g</span><span class="op">:</span> <span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="dt">h</span><span class="op">:</span> <span class="st">&#39;x&#39;</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">5</span> <span class="op">},</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="op">{</span> <span class="dt">g</span><span class="op">:</span> <span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="dt">h</span><span class="op">:</span> <span class="st">&#39;y&#39;</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">15</span> <span class="op">},</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>  <span class="op">{</span> <span class="dt">g</span><span class="op">:</span> <span class="st">&#39;b&#39;</span><span class="op">,</span> <span class="dt">h</span><span class="op">:</span> <span class="st">&#39;x&#39;</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">10</span> <span class="op">},</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>  <span class="op">{</span> <span class="dt">g</span><span class="op">:</span> <span class="st">&#39;b&#39;</span><span class="op">,</span> <span class="dt">h</span><span class="op">:</span> <span class="st">&#39;x&#39;</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">20</span> <span class="op">},</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>  <span class="op">{</span> <span class="dt">g</span><span class="op">:</span> <span class="st">&#39;b&#39;</span><span class="op">,</span> <span class="dt">h</span><span class="op">:</span> <span class="st">&#39;y&#39;</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">30</span> <span class="op">},</span></span>
<span id="cb9-7"><a href="#cb9-7"></a>]</span>
<span id="cb9-8"><a href="#cb9-8"></a></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="at">tidy</span>(</span>
<span id="cb9-10"><a href="#cb9-10"></a>  data<span class="op">,</span></span>
<span id="cb9-11"><a href="#cb9-11"></a>  <span class="at">groupBy</span>(</span>
<span id="cb9-12"><a href="#cb9-12"></a>    [<span class="st">&#39;g&#39;</span><span class="op">,</span> <span class="st">&#39;h&#39;</span>]<span class="op">,</span> </span>
<span id="cb9-13"><a href="#cb9-13"></a>    [</span>
<span id="cb9-14"><a href="#cb9-14"></a>      <span class="at">mutate</span>(<span class="op">{</span> <span class="dt">key</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span><span class="va">d</span>.<span class="at">g</span><span class="sc">}${</span><span class="va">d</span>.<span class="at">h</span><span class="sc">}</span><span class="vs">`</span><span class="op">}</span>)</span>
<span id="cb9-15"><a href="#cb9-15"></a>    ]<span class="op">,</span> </span>
<span id="cb9-16"><a href="#cb9-16"></a>    <span class="va">groupBy</span>.<span class="at">object</span>() <span class="co">// &lt;-- specify the export</span></span>
<span id="cb9-17"><a href="#cb9-17"></a>  )</span>
<span id="cb9-18"><a href="#cb9-18"></a>)<span class="op">;</span></span></code></pre></div>
<div id="out-unnamed-chunk-7">
<pre></pre>
</div>
<script type="text/javascript">
const log_out_unnamed_chunk_7 = redirectLogger(document.querySelector("#out-unnamed-chunk-7 > pre"))
document.addEventListener("DOMContentLoaded", function() {
log_out_unnamed_chunk_7(`window.data = [
  { g: 'a', h: 'x', value: 5 },
  { g: 'a', h: 'y', value: 15 },
  { g: 'b', h: 'x', value: 10 },
  { g: 'b', h: 'x', value: 20 },
  { g: 'b', h: 'y', value: 30 },
]

tidy(
  data,
  groupBy(
    ['g', 'h'], 
    [
      mutate({ key: d => \`\${d.g}\${d.h}\`})
    ], 
    groupBy.object() // <-- specify the export
  )
);
`)
})
</script>
<p>The manually formatted output is:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1"></a><span class="op">{</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="st">&quot;a&quot;</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>    <span class="st">&quot;x&quot;</span><span class="op">:</span> [<span class="op">{</span><span class="st">&quot;g&quot;</span><span class="op">:</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;h&quot;</span><span class="op">:</span> <span class="st">&quot;x&quot;</span><span class="op">,</span> <span class="st">&quot;value&quot;</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span> <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;ax&quot;</span><span class="op">}</span>]<span class="op">,</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>    <span class="st">&quot;y&quot;</span><span class="op">:</span> [<span class="op">{</span><span class="st">&quot;g&quot;</span><span class="op">:</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;h&quot;</span><span class="op">:</span> <span class="st">&quot;y&quot;</span><span class="op">,</span> <span class="st">&quot;value&quot;</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span> <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;ay&quot;</span><span class="op">}</span>]</span>
<span id="cb10-5"><a href="#cb10-5"></a>  <span class="op">},</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>  <span class="st">&quot;b&quot;</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb10-7"><a href="#cb10-7"></a>    <span class="st">&quot;x&quot;</span><span class="op">:</span> [</span>
<span id="cb10-8"><a href="#cb10-8"></a>      <span class="op">{</span><span class="st">&quot;g&quot;</span><span class="op">:</span> <span class="st">&quot;b&quot;</span><span class="op">,</span> <span class="st">&quot;h&quot;</span><span class="op">:</span> <span class="st">&quot;x&quot;</span><span class="op">,</span> <span class="st">&quot;value&quot;</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span> <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;bx&quot;</span><span class="op">},</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>      <span class="op">{</span><span class="st">&quot;g&quot;</span><span class="op">:</span> <span class="st">&quot;b&quot;</span><span class="op">,</span> <span class="st">&quot;h&quot;</span><span class="op">:</span> <span class="st">&quot;x&quot;</span><span class="op">,</span> <span class="st">&quot;value&quot;</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span> <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;bx&quot;</span><span class="op">}</span></span>
<span id="cb10-10"><a href="#cb10-10"></a>    ]<span class="op">,</span></span>
<span id="cb10-11"><a href="#cb10-11"></a>    <span class="st">&quot;y&quot;</span><span class="op">:</span> [<span class="op">{</span><span class="st">&quot;g&quot;</span><span class="op">:</span> <span class="st">&quot;b&quot;</span><span class="op">,</span> <span class="st">&quot;h&quot;</span><span class="op">:</span> <span class="st">&quot;y&quot;</span><span class="op">,</span> <span class="st">&quot;value&quot;</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span> <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;by&quot;</span><span class="op">}</span>]</span>
<span id="cb10-12"><a href="#cb10-12"></a>  <span class="op">}</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="op">}</span></span></code></pre></div>
<p>Or alternatively as <code>{ key, values }</code> entries-objects via <code>groupBy.entriesObject()</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1"></a><span class="at">tidy</span>(data<span class="op">,</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="at">groupBy</span>(</span>
<span id="cb11-3"><a href="#cb11-3"></a>    [<span class="st">&#39;g&#39;</span><span class="op">,</span> <span class="st">&#39;h&#39;</span>]<span class="op">,</span> </span>
<span id="cb11-4"><a href="#cb11-4"></a>    [</span>
<span id="cb11-5"><a href="#cb11-5"></a>      <span class="at">mutate</span>(<span class="op">{</span> <span class="dt">key</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span><span class="va">d</span>.<span class="at">g</span><span class="sc">}${</span><span class="va">d</span>.<span class="at">h</span><span class="sc">}</span><span class="vs">`</span><span class="op">}</span>)</span>
<span id="cb11-6"><a href="#cb11-6"></a>    ]<span class="op">,</span> </span>
<span id="cb11-7"><a href="#cb11-7"></a>    <span class="va">groupBy</span>.<span class="at">entriesObject</span>() <span class="co">// &lt;-- specify the export</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>  )</span>
<span id="cb11-9"><a href="#cb11-9"></a>)<span class="op">;</span></span></code></pre></div>
<div id="out-unnamed-chunk-8">
<pre></pre>
</div>
<script type="text/javascript">
const log_out_unnamed_chunk_8 = redirectLogger(document.querySelector("#out-unnamed-chunk-8 > pre"))
document.addEventListener("DOMContentLoaded", function() {
log_out_unnamed_chunk_8(`tidy(data,
  groupBy(
    ['g', 'h'], 
    [
      mutate({ key: d => \`\${d.g}\${d.h}\`})
    ], 
    groupBy.entriesObject() // <-- specify the export
  )
);`)
})
</script>
<p>The manually formatted output is:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1"></a>[</span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="op">{</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>    <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;a&quot;</span><span class="op">,</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>    <span class="st">&quot;values&quot;</span><span class="op">:</span> [</span>
<span id="cb12-5"><a href="#cb12-5"></a>      <span class="op">{</span><span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;x&quot;</span><span class="op">,</span> <span class="st">&quot;values&quot;</span><span class="op">:</span> [<span class="op">{</span><span class="st">&quot;g&quot;</span><span class="op">:</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;h&quot;</span><span class="op">:</span> <span class="st">&quot;x&quot;</span><span class="op">,</span> <span class="st">&quot;value&quot;</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span> <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;ax&quot;</span><span class="op">}</span>]<span class="op">},</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>      <span class="op">{</span><span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;y&quot;</span><span class="op">,</span> <span class="st">&quot;values&quot;</span><span class="op">:</span> [<span class="op">{</span><span class="st">&quot;g&quot;</span><span class="op">:</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;h&quot;</span><span class="op">:</span> <span class="st">&quot;y&quot;</span><span class="op">,</span> <span class="st">&quot;value&quot;</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span> <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;ay&quot;</span><span class="op">}</span>]<span class="op">}</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>    ]</span>
<span id="cb12-8"><a href="#cb12-8"></a>  <span class="op">},</span></span>
<span id="cb12-9"><a href="#cb12-9"></a>  <span class="op">{</span></span>
<span id="cb12-10"><a href="#cb12-10"></a>    <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;b&quot;</span><span class="op">,</span></span>
<span id="cb12-11"><a href="#cb12-11"></a>    <span class="st">&quot;values&quot;</span><span class="op">:</span> [</span>
<span id="cb12-12"><a href="#cb12-12"></a>      <span class="op">{</span></span>
<span id="cb12-13"><a href="#cb12-13"></a>        <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;x&quot;</span><span class="op">,</span></span>
<span id="cb12-14"><a href="#cb12-14"></a>        <span class="st">&quot;values&quot;</span><span class="op">:</span> [</span>
<span id="cb12-15"><a href="#cb12-15"></a>          <span class="op">{</span><span class="st">&quot;g&quot;</span><span class="op">:</span> <span class="st">&quot;b&quot;</span><span class="op">,</span> <span class="st">&quot;h&quot;</span><span class="op">:</span> <span class="st">&quot;x&quot;</span><span class="op">,</span> <span class="st">&quot;value&quot;</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span> <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;bx&quot;</span><span class="op">},</span></span>
<span id="cb12-16"><a href="#cb12-16"></a>          <span class="op">{</span><span class="st">&quot;g&quot;</span><span class="op">:</span> <span class="st">&quot;b&quot;</span><span class="op">,</span> <span class="st">&quot;h&quot;</span><span class="op">:</span> <span class="st">&quot;x&quot;</span><span class="op">,</span> <span class="st">&quot;value&quot;</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span> <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;bx&quot;</span><span class="op">}</span></span>
<span id="cb12-17"><a href="#cb12-17"></a>        ]</span>
<span id="cb12-18"><a href="#cb12-18"></a>      <span class="op">},</span></span>
<span id="cb12-19"><a href="#cb12-19"></a>      <span class="op">{</span><span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;y&quot;</span><span class="op">,</span> <span class="st">&quot;values&quot;</span><span class="op">:</span> [<span class="op">{</span><span class="st">&quot;g&quot;</span><span class="op">:</span> <span class="st">&quot;b&quot;</span><span class="op">,</span> <span class="st">&quot;h&quot;</span><span class="op">:</span> <span class="st">&quot;y&quot;</span><span class="op">,</span> <span class="st">&quot;value&quot;</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span> <span class="st">&quot;key&quot;</span><span class="op">:</span> <span class="st">&quot;by&quot;</span><span class="op">}</span>]<span class="op">}</span></span>
<span id="cb12-20"><a href="#cb12-20"></a>    ]</span>
<span id="cb12-21"><a href="#cb12-21"></a>  <span class="op">}</span></span>
<span id="cb12-22"><a href="#cb12-22"></a>]</span></code></pre></div>
<p>Its common to be left with a single leaf in a groupBy set, especially after running summarize(). To prevent your exported data having its values wrapped in an array, you can pass the <code>single</code> option to it.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1"></a><span class="at">tidy</span>(data<span class="op">,</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="at">groupBy</span>([<span class="st">&#39;g&#39;</span><span class="op">,</span> <span class="st">&#39;h&#39;</span>]<span class="op">,</span> [</span>
<span id="cb13-3"><a href="#cb13-3"></a>    <span class="at">summarize</span>(<span class="op">{</span> <span class="dt">total</span><span class="op">:</span> <span class="at">sum</span>(<span class="st">&#39;value&#39;</span>) <span class="op">}</span>)</span>
<span id="cb13-4"><a href="#cb13-4"></a>  ]<span class="op">,</span> <span class="va">groupBy</span>.<span class="at">object</span>(<span class="op">{</span> <span class="dt">single</span><span class="op">:</span> <span class="kw">true</span> <span class="op">}</span>))</span>
<span id="cb13-5"><a href="#cb13-5"></a>)<span class="op">;</span></span></code></pre></div>
<div id="out-unnamed-chunk-9">
<pre></pre>
</div>
<script type="text/javascript">
const log_out_unnamed_chunk_9 = redirectLogger(document.querySelector("#out-unnamed-chunk-9 > pre"))
document.addEventListener("DOMContentLoaded", function() {
log_out_unnamed_chunk_9(`tidy(data,
  groupBy(['g', 'h'], [
    summarize({ total: sum('value') })
  ], groupBy.object({ single: true }))
);`)
})
</script>
<p>The manually formatted output is:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1"></a><span class="op">{</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="st">&quot;a&quot;</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>    <span class="st">&quot;x&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;total&quot;</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span> <span class="st">&quot;g&quot;</span><span class="op">:</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;h&quot;</span><span class="op">:</span> <span class="st">&quot;x&quot;</span><span class="op">},</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>    <span class="st">&quot;y&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;total&quot;</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span> <span class="st">&quot;g&quot;</span><span class="op">:</span> <span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="st">&quot;h&quot;</span><span class="op">:</span> <span class="st">&quot;y&quot;</span><span class="op">}</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>  <span class="op">},</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>  <span class="st">&quot;b&quot;</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>    <span class="st">&quot;x&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;total&quot;</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span> <span class="st">&quot;g&quot;</span><span class="op">:</span> <span class="st">&quot;b&quot;</span><span class="op">,</span> <span class="st">&quot;h&quot;</span><span class="op">:</span> <span class="st">&quot;x&quot;</span><span class="op">},</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>    <span class="st">&quot;y&quot;</span><span class="op">:</span> <span class="op">{</span><span class="st">&quot;total&quot;</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span> <span class="st">&quot;g&quot;</span><span class="op">:</span> <span class="st">&quot;b&quot;</span><span class="op">,</span> <span class="st">&quot;h&quot;</span><span class="op">:</span> <span class="st">&quot;y&quot;</span><span class="op">}</span></span>
<span id="cb14-9"><a href="#cb14-9"></a>  <span class="op">}</span></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="op">}</span></span></code></pre></div>
<p>Visit the <a href="https://pbeshai.github.io/tidy/docs/api/tidy">API reference docs</a> to learn more about how each function works and all the options they take. Be sure to check out the <code>levels</code> export, which can let you mix-and-match different export types based on the depth of the data. For quick reference, other available groupBy exports include:</p>
<ul>
<li>groupBy.entries()</li>
<li>groupBy.entriesObject()</li>
<li>groupBy.grouped()</li>
<li>groupBy.levels()</li>
<li>groupBy.object()</li>
<li>groupBy.keys()</li>
<li>groupBy.map()</li>
<li>groupBy.values()</li>
</ul>
<hr />
<h4 id="shout-out-to-netflix">Shout out to Netflix</h4>
<p>I want to give a big shout out to <a href="https://research.netflix.com/">Netflix</a>, my current employer, for giving me the opportunity to work on this project and to open source it. Its a great place to work and if you enjoy tinkering with data-related things, Id strongly recommend checking out <a href="https://research.netflix.com/research-area/analytics">our analytics department</a>.  <a href="https://peterbeshai.com/">Peter Beshai</a></p>

</main>


<style type="text/css" charset="utf-8">
main {
  max-width: 48em;
  margin: auto;
  padding: 0 2em;
}

img {
  max-width: 100%;
}
</style>

</body>
</html>
